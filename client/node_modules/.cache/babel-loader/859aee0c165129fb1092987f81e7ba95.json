{"ast":null,"code":"import _objectSpread from \"/Users/andershornor/Class_Work/ReadThat1/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/andershornor/Class_Work/ReadThat1/client/src/containers/Header.jsx\";\nimport React, { Component } from 'react';\nimport CategorySelector from '../components/CategorySelector';\nimport NewPost from '../components/forms/NewPost';\nimport NewCategory from '../components/forms/NewCategory';\nimport { connect } from 'react-redux';\nimport { createPost, filterPosts } from '../actions/postActions';\nimport { createCategory } from '../actions/categoryActions';\nimport { userLogout } from '../actions/userActions';\n\nclass Header extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      newPost: false,\n      newCategory: false,\n      post: {\n        content: null,\n        img: null,\n        uploadedFile: null,\n        title: null,\n        link: null,\n        category: 'All',\n        user_id: null\n      },\n      category: {\n        category: null,\n        description: null\n      },\n      prevProps: null\n    };\n\n    this.handleClick = e => {\n      this.setState({\n        post: _objectSpread({}, this.state.post, {\n          user_id: this.props.currentUser.user.id\n        }),\n        category: _objectSpread({}, this.state.category)\n      });\n      this.setState({\n        [e.target.name]: !this.state[e.target.name]\n      });\n    };\n\n    this.handleChange = (e, loc, name) => {\n      let key;\n      name ? key = name : key = e.target.name;\n      let newState;\n      e.length > 0 ? newState = e : newState = e.target.value;\n      this.setState({\n        [loc]: _objectSpread({}, this.state[loc], {\n          [key]: newState\n        })\n      });\n    };\n\n    this.handleWidget = (e, widget) => {\n      e.preventDefault();\n      widget.open();\n    };\n\n    this.handleImageUpload = (errors, image) => {\n      errors ? console.log(errors) : this.setState({\n        post: _objectSpread({}, this.state.post, {\n          uploadedFile: image[0]['url']\n        })\n      });\n    };\n\n    this.handleSelect = e => {\n      this.setState({\n        post: {\n          category: [e.target.value]\n        }\n      });\n    };\n\n    this.handleSubmit = async (e, loc) => {\n      e.preventDefault();\n      let stateHolder;\n\n      if (loc === \"post\") {\n        stateHolder = 'newPost';\n        await this.props.createPost(this.state.post);\n      } else {\n        stateHolder = 'newCategory';\n        await this.props.createCategory(this.state.category);\n      }\n\n      this.setState({\n        [stateHolder]: ![this.state.stateHolder]\n      });\n      await this.props.handleSelect();\n    };\n  }\n\n  render() {\n    const _this$props = this.props,\n          token = _this$props.token,\n          currentUser = _this$props.currentUser,\n          selectedCategories = _this$props.selectedCategories,\n          handleChange = _this$props.handleChange,\n          categories = _this$props.categories,\n          howToFilterBool = _this$props.howToFilterBool,\n          filterPosts = _this$props.filterPosts,\n          userLogout = _this$props.userLogout;\n    const _this$state = this.state,\n          newPost = _this$state.newPost,\n          newCategory = _this$state.newCategory;\n    return React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cat-selector\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(CategorySelector, {\n      handleChange: handleChange,\n      selectedCategories: selectedCategories,\n      token: token,\n      categories: categories,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      className: \"newPost\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, newPost ? React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(NewPost, {\n      handleChange: this.handleChange,\n      onSubmit: this.handleSubmit,\n      currentUser: currentUser,\n      categories: categories,\n      handleWidget: this.handleWidget,\n      handleImageUpload: this.handleImageUpload,\n      handleClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })) : React.createElement(\"button\", {\n      name: \"newPost\",\n      onClick: e => this.handleClick(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Create New Post\")), React.createElement(\"span\", {\n      className: \"newCategory\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, newCategory ? React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(NewCategory, {\n      handleChange: this.handleChange,\n      onSubmit: this.handleSubmit,\n      currentUser: currentUser,\n      handleClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), \" \") : React.createElement(\"button\", {\n      name: \"newCategory\",\n      onClick: e => this.handleClick(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Create New Category\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, howToFilterBool ? React.createElement(\"button\", {\n      onClick: e => filterPosts(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \" Posts Low -> High \") : React.createElement(\"button\", {\n      onClick: e => filterPosts(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \" Posts High -> Low \")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"logout\",\n      onClick: e => userLogout(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Logout\")));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  categories: state.categories.categories,\n  selectedCategories: state.categories.selectedCategories,\n  token: state.user.token,\n  currentUser: state.user.currentUser\n});\n\nexport default connect(mapStateToProps, {\n  createPost,\n  createCategory,\n  userLogout\n})(Header);","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/containers/Header.jsx"],"names":["React","Component","CategorySelector","NewPost","NewCategory","connect","createPost","filterPosts","createCategory","userLogout","Header","state","newPost","newCategory","post","content","img","uploadedFile","title","link","category","user_id","description","prevProps","handleClick","e","setState","props","currentUser","user","id","target","name","handleChange","loc","key","newState","length","value","handleWidget","widget","preventDefault","open","handleImageUpload","errors","image","console","log","handleSelect","handleSubmit","stateHolder","render","token","selectedCategories","categories","howToFilterBool","mapStateToProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport CategorySelector from '../components/CategorySelector';\nimport NewPost from '../components/forms/NewPost';\nimport NewCategory from '../components/forms/NewCategory';\nimport { connect } from 'react-redux';\nimport { createPost, filterPosts } from '../actions/postActions'\nimport { createCategory }from '../actions/categoryActions'\nimport { userLogout } from '../actions/userActions'\n\n\nclass Header extends Component {\n\n    state = {\n        newPost: false,\n        newCategory: false,\n        post: {\n            content: null,\n            img: null,\n            uploadedFile: null,\n            title: null,\n            link: null,\n            category: 'All',\n            user_id: null\n        },\n        category: {\n            category: null,\n            description: null,\n        },\n        prevProps: null\n    }\n\n\n    handleClick = (e) => {\n        this.setState({post: {...this.state.post, user_id: this.props.currentUser.user.id}, category: {...this.state.category}})\n        this.setState({[e.target.name]: !this.state[e.target.name]})\n    }\n\n\thandleChange = (e, loc, name) => {\n        let key;\n            name ? key = name : key = e.target.name\n        let newState\n            e.length > 0 ? newState = e : newState = e.target.value; \n        this.setState({ [loc]: {...this.state[loc], [key]: newState }});\n    };\n\n    handleWidget = (e, widget) => {\n        e.preventDefault()\n        widget.open();\n    }\n\n    handleImageUpload = (errors, image) => {\n        errors ? console.log(errors) : this.setState({post:{...this.state.post, uploadedFile: image[0]['url']}})\n    }\n\n    handleSelect = (e) => {\n        this.setState({post: {category: [e.target.value]}})\n    }\n    \n    handleSubmit = async (e, loc) => {\n        e.preventDefault();\n        let stateHolder;\n        if (loc === \"post\"){ \n            stateHolder = 'newPost'\n            await this.props.createPost(this.state.post)\n        } else {\n            stateHolder = 'newCategory'\n            await this.props.createCategory(this.state.category)\n        }\n        this.setState({[stateHolder]: ![this.state.stateHolder] })\n        await this.props.handleSelect()\n    }\n\n    render () {\n        const { token, currentUser, selectedCategories, handleChange, categories, howToFilterBool, filterPosts, userLogout } = this.props\n        const { newPost, newCategory } = this.state\n        return (\n            <div className=\"header\">\n                <span className=\"cat-selector\">\n                <CategorySelector\n                    handleChange={ handleChange }\n                    selectedCategories={ selectedCategories }\n                    token={token}\n                    categories={categories}\n                />\n                </span>\n                <span className=\"newPost\">\n                    {newPost ? <span><NewPost handleChange={this.handleChange} onSubmit={this.handleSubmit} currentUser={currentUser} categories={categories} handleWidget={this.handleWidget} handleImageUpload={this.handleImageUpload} handleClick={this.handleClick}/></span> : <button name=\"newPost\" onClick={e => this.handleClick(e)}>Create New Post</button>}\n                </span>\n                <span className=\"newCategory\">\n                    {newCategory ? <span><NewCategory handleChange={this.handleChange} onSubmit={this.handleSubmit} currentUser={currentUser} handleClick={this.handleClick}/> </span>: <button name=\"newCategory\" onClick={e => this.handleClick(e)}>Create New Category</button>}\n                </span>\n                <span>\n                    {howToFilterBool ? <button onClick={e => filterPosts(true)}> Posts Low -> High </button> : <button onClick={e => filterPosts()}> Posts High -> Low </button>}\n                </span>\n                <span>  \n                    <button className='logout' onClick={e => userLogout()}>Logout</button>\n                </span>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    categories: state.categories.categories,\n    selectedCategories: state.categories.selectedCategories,\n    token: state.user.token,\n    currentUser: state.user.currentUser\n})\n\nexport default connect(mapStateToProps, { createPost, createCategory, userLogout })(Header)"]},"metadata":{},"sourceType":"module"}