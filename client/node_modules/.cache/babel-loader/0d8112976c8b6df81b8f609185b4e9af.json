{"ast":null,"code":"import { NEW_USER, USER_LOGIN, USER_LOGOUT, PAGE_RELOAD } from '../actions/types';\nimport { API } from '../containers/MainPage';\nexport const pageReload = () => dispatch => {\n  const _localStorage$getItem = localStorage.getItem('user-token'),\n        token = _localStorage$getItem.token;\n\n  debugger;\n\n  if (token !== \"undefined\" && token !== null) {\n    fetch(\"\".concat(API, \"users/current_user\"), {\n      headers: {\n        'Authorization': \"Bearer \".concat(token),\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      }\n    }).then(res => res.json()).then(res => dispatch({\n      type: PAGE_RELOAD,\n      payload: {\n        currentUser: res,\n        token: res.token\n      }\n    }));\n  }\n};\nexport const userLogin = (username, password) => async dispatch => {\n  await fetch(API + 'login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json'\n    },\n    body: JSON.stringify({\n      user: {\n        username: username,\n        password: password\n      }\n    })\n  }).then(res => res.json()).then(res => {\n    res.errors ? alert(res.errors) : dispatch({\n      type: USER_LOGIN,\n      payload: {\n        currentUser: res,\n        token: res.token\n      }\n    });\n  });\n};\nexport const userLogout = () => dispatch => {\n  localStorage.clear();\n  dispatch({\n    type: USER_LOGOUT\n  });\n};\nexport const newUser = (username, password, passwordConfirmation) => dispatch => {\n  fetch(API + 'users', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json'\n    },\n    body: JSON.stringify({\n      user: {\n        username: username,\n        password: password,\n        password_confirmation: passwordConfirmation\n      }\n    })\n  }).then(res => res.json()).then(res => {\n    res.error ? alert(res.error) : dispatch({\n      type: NEW_USER,\n      payload: {\n        currentUser: res,\n        token: res.token\n      }\n    });\n  });\n};","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/actions/userActions.jsx"],"names":["NEW_USER","USER_LOGIN","USER_LOGOUT","PAGE_RELOAD","API","pageReload","dispatch","localStorage","getItem","token","fetch","headers","Accept","then","res","json","type","payload","currentUser","userLogin","username","password","method","body","JSON","stringify","user","errors","alert","userLogout","clear","newUser","passwordConfirmation","password_confirmation","error"],"mappings":"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","sourcesContent":["import { NEW_USER, USER_LOGIN, USER_LOGOUT, PAGE_RELOAD } from '../actions/types'\nimport { API } from '../containers/MainPage'\n\n    export const pageReload = () => dispatch => {\n        const { token } = localStorage.getItem('user-token')\n        debugger\n        if( token !== \"undefined\" && token !== null) {\n            fetch(`${API}users/current_user`, {\n                headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json',\n                Accept: 'application/json'\n                }\n            })\n            .then(res => res.json())\n            .then(res => dispatch({\n                type: PAGE_RELOAD,\n                payload: {\n                    currentUser: res, \n                    token: res.token}\n                })\n            )\n        }\n    }\n\n    export const userLogin = ( username, password ) => async dispatch => {\n\t\tawait fetch(API + 'login', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json', Accept: 'application/json' },\n\t\t\tbody: JSON.stringify({ user: { username: username, password: password } })\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tres.errors ? \n\t\t\t\talert(res.errors)\n\t\t\t\t:\n\t\t\t\tdispatch({\n                    type: USER_LOGIN,\n                    payload: { \n                        currentUser: res,\n                        token: res.token\n                    }\n\t\t\t\t})\n\t\t\t}\n\t\t)\n    }\n\n    export const userLogout = () => dispatch => {\n        localStorage.clear()\n        dispatch({\n            type: USER_LOGOUT\n        })\n    }\n\n    export const newUser = ( username, password, passwordConfirmation) => dispatch => {\n\t\tfetch(API + 'users', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json', Accept: 'application/json' },\n\t\t\tbody: JSON.stringify({\n\t\t\t\tuser: {\n\t\t\t\t\tusername: username,\n\t\t\t\t\tpassword: password,\n\t\t\t\t\tpassword_confirmation: passwordConfirmation\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tres.error\n\t\t\t\t\t? alert(res.error)\n\t\t\t\t\t: dispatch({\n                        type: NEW_USER,\n                        payload: {\n\t\t\t\t\t\t\tcurrentUser: res,\n\t\t\t\t\t\t\ttoken: res.token\n                        }\n\t\t\t\t\t  });\n\t\t\t})\n    }"]},"metadata":{},"sourceType":"module"}