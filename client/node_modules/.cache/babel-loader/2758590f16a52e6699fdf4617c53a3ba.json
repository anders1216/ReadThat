{"ast":null,"code":"import _objectSpread from \"/Users/andershornor/Class_Work/ReadThat1/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/andershornor/Class_Work/ReadThat1/client/src/containers/Header.jsx\";\nimport React, { Component } from 'react';\nimport CategorySelector from '../components/CategorySelector';\nimport NewPost from '../components/forms/NewPost';\nimport NewCategory from '../components/forms/NewCategory';\nimport { API } from './MainPage';\nexport default class Header extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      newPost: false,\n      newCategory: false,\n      post: {\n        content: null,\n        img: null,\n        uploadedFile: null,\n        title: null,\n        link: null,\n        category: 'All',\n        user_id: null\n      },\n      category: {\n        category: null,\n        description: null\n      },\n      prevProps: null\n    };\n\n    this.handleClick = e => {\n      this.setState({\n        post: _objectSpread({}, this.state.post, {\n          user_id: this.props.currentUser.user.id\n        }),\n        category: _objectSpread({}, this.state.category)\n      });\n      this.setState({\n        [e.target.name]: !this.state[e.target.name]\n      });\n    };\n\n    this.handleChange = (e, loc, name) => {\n      let key;\n      name ? key = name : key = e.target.name;\n      let newState;\n      e.length > 0 ? newState = e : newState = e.target.value;\n      this.setState({\n        [loc]: _objectSpread({}, this.state[loc], {\n          [key]: newState\n        })\n      });\n    };\n\n    this.handleWidget = (e, widget) => {\n      e.preventDefault();\n      widget.open();\n    };\n\n    this.handleImageUpload = (errors, image) => {\n      errors ? console.log(errors) : this.setState({\n        post: _objectSpread({}, this.state.post, {\n          uploadedFile: image[0]['url']\n        })\n      });\n    };\n\n    this.handleSelect = e => {\n      this.setState({\n        post: {\n          category: [e.target.value]\n        }\n      });\n    };\n\n    this.handleSubmit = async (e, loc) => {\n      e.preventDefault();\n      const token = this.props.token;\n      let stateHolder;\n      loc === \"post\" ? stateHolder = 'newPost' : stateHolder = 'newCategory';\n      await fetch(API + \"\".concat(e.target.name), {\n        method: 'POST',\n        headers: {\n          'Authorization': \"Bearer \".concat(token),\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        },\n        body: JSON.stringify({\n          [loc]: this.state[loc]\n        })\n      }).then(this.setState({\n        [stateHolder]: ![this.state.stateHolder]\n      }));\n      await this.props.handleSelect();\n    };\n  }\n\n  render() {\n    const _this$props = this.props,\n          token = _this$props.token,\n          currentUser = _this$props.currentUser,\n          selectedCategories = _this$props.selectedCategories,\n          handleChange = _this$props.handleChange,\n          categories = _this$props.categories,\n          howToFilterBool = _this$props.howToFilterBool,\n          filterPosts = _this$props.filterPosts,\n          logOut = _this$props.logOut;\n    const _this$state = this.state,\n          newPost = _this$state.newPost,\n          newCategory = _this$state.newCategory;\n    return React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"cat-selector\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(CategorySelector, {\n      handleChange: handleChange,\n      selectedCategories: selectedCategories,\n      token: token,\n      categories: categories,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      className: \"newPost\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, newPost ? React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(NewPost, {\n      handleChange: this.handleChange,\n      onSubmit: this.handleSubmit,\n      currentUser: currentUser,\n      categories: categories,\n      handleWidget: this.handleWidget,\n      handleImageUpload: this.handleImageUpload,\n      handleClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })) : React.createElement(\"button\", {\n      name: \"newPost\",\n      onClick: e => this.handleClick(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Create New Post\")), React.createElement(\"span\", {\n      className: \"newCategory\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, newCategory ? React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(NewCategory, {\n      handleChange: this.handleChange,\n      onSubmit: this.handleSubmit,\n      currentUser: currentUser,\n      handleClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), \" \") : React.createElement(\"button\", {\n      name: \"newCategory\",\n      onClick: e => this.handleClick(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Create New Category\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, howToFilterBool ? React.createElement(\"button\", {\n      onClick: e => filterPosts(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \" Posts Low -> High \") : React.createElement(\"button\", {\n      onClick: e => filterPosts(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \" Posts High -> Low \")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"logout\",\n      onClick: e => logOut(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Logout\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/containers/Header.jsx"],"names":["React","Component","CategorySelector","NewPost","NewCategory","API","Header","state","newPost","newCategory","post","content","img","uploadedFile","title","link","category","user_id","description","prevProps","handleClick","e","setState","props","currentUser","user","id","target","name","handleChange","loc","key","newState","length","value","handleWidget","widget","preventDefault","open","handleImageUpload","errors","image","console","log","handleSelect","handleSubmit","token","stateHolder","fetch","method","headers","Accept","body","JSON","stringify","then","render","selectedCategories","categories","howToFilterBool","filterPosts","logOut"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,gBAAP,MAA6B,gCAA7B;AACA,OAAOC,OAAP,MAAoB,6BAApB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,SAASC,GAAT,QAAoB,YAApB;AAEA,eAAe,MAAMC,MAAN,SAAqBL,SAArB,CAA+B;AAAA;AAAA;AAAA,SAE1CM,KAF0C,GAElC;AACJC,MAAAA,OAAO,EAAE,KADL;AAEJC,MAAAA,WAAW,EAAE,KAFT;AAGJC,MAAAA,IAAI,EAAE;AACFC,QAAAA,OAAO,EAAE,IADP;AAEFC,QAAAA,GAAG,EAAE,IAFH;AAGFC,QAAAA,YAAY,EAAE,IAHZ;AAIFC,QAAAA,KAAK,EAAE,IAJL;AAKFC,QAAAA,IAAI,EAAE,IALJ;AAMFC,QAAAA,QAAQ,EAAE,KANR;AAOFC,QAAAA,OAAO,EAAE;AAPP,OAHF;AAYJD,MAAAA,QAAQ,EAAE;AACNA,QAAAA,QAAQ,EAAE,IADJ;AAENE,QAAAA,WAAW,EAAE;AAFP,OAZN;AAgBJC,MAAAA,SAAS,EAAE;AAhBP,KAFkC;;AAAA,SAsB1CC,WAtB0C,GAsB3BC,CAAD,IAAO;AACjB,WAAKC,QAAL,CAAc;AAACZ,QAAAA,IAAI,oBAAM,KAAKH,KAAL,CAAWG,IAAjB;AAAuBO,UAAAA,OAAO,EAAE,KAAKM,KAAL,CAAWC,WAAX,CAAuBC,IAAvB,CAA4BC;AAA5D,UAAL;AAAsEV,QAAAA,QAAQ,oBAAM,KAAKT,KAAL,CAAWS,QAAjB;AAA9E,OAAd;AACA,WAAKM,QAAL,CAAc;AAAC,SAACD,CAAC,CAACM,MAAF,CAASC,IAAV,GAAiB,CAAC,KAAKrB,KAAL,CAAWc,CAAC,CAACM,MAAF,CAASC,IAApB;AAAnB,OAAd;AACH,KAzByC;;AAAA,SA2B7CC,YA3B6C,GA2B9B,CAACR,CAAD,EAAIS,GAAJ,EAASF,IAAT,KAAkB;AAC1B,UAAIG,GAAJ;AACIH,MAAAA,IAAI,GAAGG,GAAG,GAAGH,IAAT,GAAgBG,GAAG,GAAGV,CAAC,CAACM,MAAF,CAASC,IAAnC;AACJ,UAAII,QAAJ;AACIX,MAAAA,CAAC,CAACY,MAAF,GAAW,CAAX,GAAeD,QAAQ,GAAGX,CAA1B,GAA8BW,QAAQ,GAAGX,CAAC,CAACM,MAAF,CAASO,KAAlD;AACJ,WAAKZ,QAAL,CAAc;AAAE,SAACQ,GAAD,qBAAW,KAAKvB,KAAL,CAAWuB,GAAX,CAAX;AAA4B,WAACC,GAAD,GAAOC;AAAnC;AAAF,OAAd;AACH,KAjCyC;;AAAA,SAmC1CG,YAnC0C,GAmC3B,CAACd,CAAD,EAAIe,MAAJ,KAAe;AAC1Bf,MAAAA,CAAC,CAACgB,cAAF;AACAD,MAAAA,MAAM,CAACE,IAAP;AACH,KAtCyC;;AAAA,SAwC1CC,iBAxC0C,GAwCtB,CAACC,MAAD,EAASC,KAAT,KAAmB;AACnCD,MAAAA,MAAM,GAAGE,OAAO,CAACC,GAAR,CAAYH,MAAZ,CAAH,GAAyB,KAAKlB,QAAL,CAAc;AAACZ,QAAAA,IAAI,oBAAK,KAAKH,KAAL,CAAWG,IAAhB;AAAsBG,UAAAA,YAAY,EAAE4B,KAAK,CAAC,CAAD,CAAL,CAAS,KAAT;AAApC;AAAL,OAAd,CAA/B;AACH,KA1CyC;;AAAA,SA4C1CG,YA5C0C,GA4C1BvB,CAAD,IAAO;AAClB,WAAKC,QAAL,CAAc;AAACZ,QAAAA,IAAI,EAAE;AAACM,UAAAA,QAAQ,EAAE,CAACK,CAAC,CAACM,MAAF,CAASO,KAAV;AAAX;AAAP,OAAd;AACH,KA9CyC;;AAAA,SAgD1CW,YAhD0C,GAgD3B,OAAOxB,CAAP,EAAUS,GAAV,KAAkB;AAC7BT,MAAAA,CAAC,CAACgB,cAAF;AAD6B,YAErBS,KAFqB,GAEX,KAAKvB,KAFM,CAErBuB,KAFqB;AAG7B,UAAIC,WAAJ;AACAjB,MAAAA,GAAG,KAAK,MAAR,GAAiBiB,WAAW,GAAG,SAA/B,GAA2CA,WAAW,GAAG,aAAzD;AACA,YAAMC,KAAK,CAAC3C,GAAG,aAAMgB,CAAC,CAACM,MAAF,CAASC,IAAf,CAAJ,EAA2B;AAClCqB,QAAAA,MAAM,EAAE,MAD0B;AAElCC,QAAAA,OAAO,EAAE;AAAC,4CAA2BJ,KAA3B,CAAD;AAAqC,0BAAgB,kBAArD;AAAyEK,UAAAA,MAAM,EAAE;AAAjF,SAFyB;AAGlCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAC,WAACxB,GAAD,GAAO,KAAKvB,KAAL,CAAWuB,GAAX;AAAR,SAAf;AAH4B,OAA3B,CAAL,CAIHyB,IAJG,CAIE,KAAKjC,QAAL,CAAc;AAAC,SAACyB,WAAD,GAAe,CAAC,CAAC,KAAKxC,KAAL,CAAWwC,WAAZ;AAAjB,OAAd,CAJF,CAAN;AAKA,YAAM,KAAKxB,KAAL,CAAWqB,YAAX,EAAN;AACH,KA3DyC;AAAA;;AA6D1CY,EAAAA,MAAM,GAAI;AAAA,wBAC6G,KAAKjC,KADlH;AAAA,UACEuB,KADF,eACEA,KADF;AAAA,UACStB,WADT,eACSA,WADT;AAAA,UACsBiC,kBADtB,eACsBA,kBADtB;AAAA,UAC0C5B,YAD1C,eAC0CA,YAD1C;AAAA,UACwD6B,UADxD,eACwDA,UADxD;AAAA,UACoEC,eADpE,eACoEA,eADpE;AAAA,UACqFC,WADrF,eACqFA,WADrF;AAAA,UACkGC,MADlG,eACkGA,MADlG;AAAA,wBAE2B,KAAKtD,KAFhC;AAAA,UAEEC,OAFF,eAEEA,OAFF;AAAA,UAEWC,WAFX,eAEWA,WAFX;AAGN,WACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAM,MAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,gBAAD;AACI,MAAA,YAAY,EAAGoB,YADnB;AAEI,MAAA,kBAAkB,EAAG4B,kBAFzB;AAGI,MAAA,KAAK,EAAEX,KAHX;AAII,MAAA,UAAU,EAAEY,UAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CADJ,EASI;AAAM,MAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKlD,OAAO,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM,oBAAC,OAAD;AAAS,MAAA,YAAY,EAAE,KAAKqB,YAA5B;AAA0C,MAAA,QAAQ,EAAE,KAAKgB,YAAzD;AAAuE,MAAA,WAAW,EAAErB,WAApF;AAAiG,MAAA,UAAU,EAAEkC,UAA7G;AAAyH,MAAA,YAAY,EAAE,KAAKvB,YAA5I;AAA0J,MAAA,iBAAiB,EAAE,KAAKI,iBAAlL;AAAqM,MAAA,WAAW,EAAE,KAAKnB,WAAvN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAN,CAAH,GAAwP;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,OAAO,EAAEC,CAAC,IAAI,KAAKD,WAAL,CAAiBC,CAAjB,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADpQ,CATJ,EAYI;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKZ,WAAW,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM,oBAAC,WAAD;AAAa,MAAA,YAAY,EAAE,KAAKoB,YAAhC;AAA8C,MAAA,QAAQ,EAAE,KAAKgB,YAA7D;AAA2E,MAAA,WAAW,EAAErB,WAAxF;AAAqG,MAAA,WAAW,EAAE,KAAKJ,WAAvH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAN,MAAH,GAAwJ;AAAQ,MAAA,IAAI,EAAC,aAAb;AAA2B,MAAA,OAAO,EAAEC,CAAC,IAAI,KAAKD,WAAL,CAAiBC,CAAjB,CAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADxK,CAZJ,EAeI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKsC,eAAe,GAAG;AAAQ,MAAA,OAAO,EAAEtC,CAAC,IAAIuC,WAAW,CAAC,IAAD,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAH,GAA2E;AAAQ,MAAA,OAAO,EAAEvC,CAAC,IAAIuC,WAAW,EAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAD/F,CAfJ,EAkBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,QAAlB;AAA2B,MAAA,OAAO,EAAEvC,CAAC,IAAIwC,MAAM,EAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAlBJ,CADJ;AAwBH;;AAxFyC","sourcesContent":["import React, {Component} from 'react';\nimport CategorySelector from '../components/CategorySelector';\nimport NewPost from '../components/forms/NewPost';\nimport NewCategory from '../components/forms/NewCategory';\nimport { API } from './MainPage';\n\nexport default class Header extends Component {\n\n    state = {\n        newPost: false,\n        newCategory: false,\n        post: {\n            content: null,\n            img: null,\n            uploadedFile: null,\n            title: null,\n            link: null,\n            category: 'All',\n            user_id: null\n        },\n        category: {\n            category: null,\n            description: null,\n        },\n        prevProps: null\n    }\n\n\n    handleClick = (e) => {\n        this.setState({post: {...this.state.post, user_id: this.props.currentUser.user.id}, category: {...this.state.category}})\n        this.setState({[e.target.name]: !this.state[e.target.name]})\n    }\n\n\thandleChange = (e, loc, name) => {\n        let key;\n            name ? key = name : key = e.target.name\n        let newState\n            e.length > 0 ? newState = e : newState = e.target.value; \n        this.setState({ [loc]: {...this.state[loc], [key]: newState }});\n    };\n\n    handleWidget = (e, widget) => {\n        e.preventDefault()\n        widget.open();\n    }\n\n    handleImageUpload = (errors, image) => {\n        errors ? console.log(errors) : this.setState({post:{...this.state.post, uploadedFile: image[0]['url']}})\n    }\n\n    handleSelect = (e) => {\n        this.setState({post: {category: [e.target.value]}})\n    }\n    \n    handleSubmit = async (e, loc) => {\n        e.preventDefault();\n        const { token } = this.props\n        let stateHolder;\n        loc === \"post\" ? stateHolder = 'newPost' : stateHolder = 'newCategory'\n        await fetch(API + `${e.target.name}`, {\n            method: 'POST',\n            headers: {'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n            body: JSON.stringify({[loc]: this.state[loc]})\n        }).then(this.setState({[stateHolder]: ![this.state.stateHolder] }))\n        await this.props.handleSelect()\n    }\n\n    render () {\n        const { token, currentUser, selectedCategories, handleChange, categories, howToFilterBool, filterPosts, logOut } = this.props\n        const { newPost, newCategory } = this.state\n        return (\n            <div className=\"header\">\n                <span className=\"cat-selector\">\n                <CategorySelector\n                    handleChange={ handleChange }\n                    selectedCategories={ selectedCategories }\n                    token={token}\n                    categories={categories}\n                />\n                </span>\n                <span className=\"newPost\">\n                    {newPost ? <span><NewPost handleChange={this.handleChange} onSubmit={this.handleSubmit} currentUser={currentUser} categories={categories} handleWidget={this.handleWidget} handleImageUpload={this.handleImageUpload} handleClick={this.handleClick}/></span> : <button name=\"newPost\" onClick={e => this.handleClick(e)}>Create New Post</button>}\n                </span>\n                <span className=\"newCategory\">\n                    {newCategory ? <span><NewCategory handleChange={this.handleChange} onSubmit={this.handleSubmit} currentUser={currentUser} handleClick={this.handleClick}/> </span>: <button name=\"newCategory\" onClick={e => this.handleClick(e)}>Create New Category</button>}\n                </span>\n                <span>\n                    {howToFilterBool ? <button onClick={e => filterPosts(true)}> Posts Low -> High </button> : <button onClick={e => filterPosts()}> Posts High -> Low </button>}\n                </span>\n                <span>  \n                    <button className='logout' onClick={e => logOut()}>Logout</button>\n                </span>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}