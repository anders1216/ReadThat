{"ast":null,"code":"var _jsxFileName = \"/Users/andershornor/Class_Work/ReadThat1/client/src/containers/MainPage.jsx\";\nimport React, { Component } from 'react';\nimport Login from '../components/forms/Login';\nimport Feed from './Feed';\nimport NewUser from '../components/forms/NewUser';\nimport { userLogin, userLogout, newUser, pageReload } from '../actions/userActions';\nimport { connect } from 'react-redux';\nimport history from '../history';\nexport const API = 'http://localhost:3000/';\n\nclass MainPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      input: '',\n      password: '',\n      passwordConfirmation: '',\n      username: '',\n      isNewUser: false\n    };\n\n    this.logOut = () => {\n      this.props.userLogout();\n    };\n\n    this.handleChange = e => {\n      let key = e.target.name;\n      let newState = e.target.value;\n      this.setState({\n        [key]: newState\n      });\n    };\n\n    this.onNewUserSubmit = async e => {\n      const _this$state = this.state,\n            username = _this$state.username,\n            password = _this$state.password,\n            passwordConfirmation = _this$state.passwordConfirmation;\n      e.preventDefault();\n      await this.props.newUser(username, password, passwordConfirmation);\n      this.setState({\n        password: '',\n        passwordConfirmation: ''\n      });\n    };\n\n    this.onLoginSubmit = async e => {\n      const _this$state2 = this.state,\n            username = _this$state2.username,\n            password = _this$state2.password;\n      e.preventDefault();\n      this.props.userLogin(username, password);\n      this.setState({\n        username: '',\n        password: ''\n      });\n    };\n\n    this.newUserModalHandler = () => {\n      this.setState({\n        isNewUser: true\n      });\n    };\n\n    this.conditionalRender = () => {\n      let Component;\n      const isLoggedIn = this.props.isLoggedIn;\n      const isNewUser = this.state.isNewUser;\n\n      if (!isLoggedIn) {\n        if (isNewUser) {\n          history.push('/new-user');\n          Component = React.createElement(NewUser, {\n            handleChange: this.handleChange,\n            onSubmit: this.onNewUserSubmit,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65\n            },\n            __self: this\n          });\n        } else {\n          history.push('/login');\n          Component = React.createElement(Login, {\n            handleChange: this.handleChange,\n            onClick: this.newUserModalHandler,\n            onSubmit: this.onLoginSubmit,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          });\n        }\n      } else if (isLoggedIn) {\n        history.push('/feed');\n        Component = React.createElement(Feed, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        });\n      } else {\n        history.push('/login');\n        Component = React.createElement(Login, {\n          handleChange: this.handleChange,\n          onClick: this.newUserModalHandler,\n          onSubmit: this.onLoginSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        });\n      }\n\n      return Component;\n    };\n  }\n\n  componentDidMount() {\n    this.props.pageReload();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"main-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.conditionalRender());\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  isLoggedIn: state.user.isLoggedIn,\n  token: state.user.token\n});\n\nexport default connect(mapStateToProps, {\n  userLogin,\n  userLogout,\n  newUser,\n  pageReload\n})(MainPage);","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/containers/MainPage.jsx"],"names":["React","Component","Login","Feed","NewUser","userLogin","userLogout","newUser","pageReload","connect","history","API","MainPage","state","input","password","passwordConfirmation","username","isNewUser","logOut","props","handleChange","e","key","target","name","newState","value","setState","onNewUserSubmit","preventDefault","onLoginSubmit","newUserModalHandler","conditionalRender","isLoggedIn","push","componentDidMount","render","mapStateToProps","user","token"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Login from '../components/forms/Login';\nimport Feed from './Feed';\nimport NewUser from '../components/forms/NewUser';\nimport { userLogin, userLogout, newUser, pageReload } from '../actions/userActions'\nimport { connect } from 'react-redux'\nimport history from '../history';\n\nexport const API = 'http://localhost:3000/';\n\nclass MainPage extends Component {\n\tstate = {\n\t\tinput: '',\n\t\tpassword: '',\n\t\tpasswordConfirmation: '',\n\t\tusername: '',\n\t\tisNewUser: false,\n\t};\n\n\tcomponentDidMount(){\n\t\tthis.props.pageReload()\n\t}\n\n\tlogOut = () => {\n\t\tthis.props.userLogout()\n\t}\n\n\thandleChange = e => {\n\t\tlet key = e.target.name;\n\t\tlet newState = e.target.value;\n\t\tthis.setState({ [key]: newState });\n\t};\n\n\tonNewUserSubmit = async (e) => {\n\t\tconst { username, password, passwordConfirmation } = this.state;\n\t\te.preventDefault();\n\t\tawait this.props.newUser( username, password, passwordConfirmation)\n\t\tthis.setState({\n\t\t\tpassword: '',\n\t\t\tpasswordConfirmation: ''\n\t\t})\n\t};\n\n\tonLoginSubmit = async (e) => {\n\t\tconst { username, password } = this.state\n\t\te.preventDefault();\n\t\tthis.props.userLogin( username, password )\n\t\tthis.setState({\n\t\t\tusername: '',\n\t\t\tpassword: ''\n\t\t})\n\t};\n\n\tnewUserModalHandler = () => {\n\t\tthis.setState({ isNewUser: true });\n\t};\n\n\tconditionalRender = () => {\n\t\tlet Component;\n\t\tconst { isLoggedIn } = this.props;\n\t\tconst { isNewUser } = this.state\n\t\tif (!isLoggedIn) {\n\t\t\tif (isNewUser) {\n\t\t\t\thistory.push('/new-user');\n\t\t\t\tComponent = <NewUser \n\t\t\t\t\thandleChange={this.handleChange} \n\t\t\t\t\tonSubmit={this.onNewUserSubmit} />;\n\t\t\t} else {\n\t\t\t\thistory.push('/login');\n\t\t\t\tComponent = (\n\t\t\t\t\t<Login\n\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\tonClick={this.newUserModalHandler}\n\t\t\t\t\t\tonSubmit={this.onLoginSubmit}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (isLoggedIn){\n\t\t\thistory.push('/feed');\n\t\t\tComponent = <Feed  \n\t\t\t/>;\n\t\t} else {\n\t\t\thistory.push('/login');\n\t\t\tComponent = (\n\t\t\t\t<Login\n\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\tonClick={this.newUserModalHandler}\n\t\t\t\t\tonSubmit={this.onLoginSubmit}\n\t\t\t\t/>\n\t\t\t)}\n\t\treturn Component;\n\t};\n\n\trender() {\n\t\treturn <div className='main-container'>{this.conditionalRender()}</div>;\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tisLoggedIn: state.user.isLoggedIn,\n\ttoken: state.user.token\n})\n\nexport default connect(mapStateToProps, { userLogin, userLogout, newUser, pageReload })(MainPage)\n\n"]},"metadata":{},"sourceType":"module"}