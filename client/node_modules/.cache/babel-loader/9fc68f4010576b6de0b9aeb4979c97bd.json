{"ast":null,"code":"var _jsxFileName = \"/Users/andershornor/Class_Work/ReadThat1/client/src/components/User.jsx\";\nimport React, { Component } from 'react';\nimport { API } from '../containers/MainPage';\nimport { connect } from 'react-redux';\n\nclass User extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      usersVotes: [],\n      usersPosts: [],\n      votesOnUsers: [],\n      usersComments: [],\n      comments: [],\n      prevState: []\n    };\n\n    this.fetchComments = () => {\n      fetch(API + 'comments').then(res => res.json()).then(res => this.usersComments(res));\n    };\n\n    this.usersVotes = votes => {\n      const usersVotes = votes.filter(vote => vote.user_id === this.props.currentUser.user.id);\n      this.setState({\n        usersVotes: usersVotes\n      });\n    };\n\n    this.usersPosts = posts => {\n      const usersPosts = posts.filter(post => post.user_id === this.props.currentUser.user.id);\n      this.setState({\n        usersPosts: usersPosts\n      });\n    };\n\n    this.usersComments = comments => {\n      const usersComments = comments.filter(comment => comment.user_id === this.props.currentUser.user.id);\n      this.setState({\n        usersComments: usersComments,\n        comments: comments\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const _this$props = this.props,\n          posts = _this$props.posts,\n          votes = _this$props.votes;\n    this.setState({\n      prevState: {\n        votes: votes\n      }\n    });\n    await this.fetchComments();\n    await this.usersPosts(posts);\n    await this.usersVotes(votes);\n  }\n\n  componentDidUpdate() {\n    if (this.props.votes === this.state.prevState.votes) {\n      this.usersVotes(this.props.votes); // this.usersPosts(this.props.posts)\n    }\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          posts = _this$props2.posts,\n          votes = _this$props2.votes,\n          categories = _this$props2.categories,\n          currentUser = _this$props2.currentUser;\n    const _this$state = this.state,\n          usersComments = _this$state.usersComments,\n          usersPosts = _this$state.usersPosts,\n          usersVotes = _this$state.usersVotes,\n          comments = _this$state.comments;\n    return React.createElement(\"div\", {\n      className: \"user-card-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"user-card-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"user-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, currentUser.user.username), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Total Posts: \", usersPosts.length), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Total Votes: \", usersVotes.length), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Total Commentss: \", usersComments.length)), React.createElement(\"div\", {\n      className: \"general-info-card-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"general-info-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \" ReadThat General info \"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Total Posts: \", posts.length), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Total Votes: \", votes.length), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Total Commentss: \", comments.length), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Total Categories: \", categories.length)));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  votes: state.votes.votes,\n  posts: state.posts.posts,\n  categories: state.categories.categories,\n  currentUser: state.user.currentUser\n});\n\nexport default connect(mapStateToProps)(User);","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/components/User.jsx"],"names":["React","Component","API","connect","User","state","usersVotes","usersPosts","votesOnUsers","usersComments","comments","prevState","fetchComments","fetch","then","res","json","votes","filter","vote","user_id","props","currentUser","user","id","setState","posts","post","comment","componentDidMount","componentDidUpdate","render","categories","username","length","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,GAAT,QAAoB,wBAApB;AACA,SAASC,OAAT,QAAwB,aAAxB;;AAEA,MAAMC,IAAN,SAAmBH,SAAnB,CAA6B;AAAA;AAAA;AAAA,SACzBI,KADyB,GACjB;AACJC,MAAAA,UAAU,EAAE,EADR;AAEJC,MAAAA,UAAU,EAAE,EAFR;AAGJC,MAAAA,YAAY,EAAE,EAHV;AAIJC,MAAAA,aAAa,EAAE,EAJX;AAKJC,MAAAA,QAAQ,EAAE,EALN;AAMJC,MAAAA,SAAS,EAAE;AANP,KADiB;;AAAA,SAUzBC,aAVyB,GAUT,MAAM;AAClBC,MAAAA,KAAK,CAACX,GAAG,GAAG,UAAP,CAAL,CACKY,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEKF,IAFL,CAEUC,GAAG,IAAI,KAAKN,aAAL,CAAmBM,GAAnB,CAFjB;AAGH,KAdwB;;AAAA,SA+BzBT,UA/ByB,GA+BXW,KAAD,IAAW;AACpB,YAAMX,UAAU,GAAGW,KAAK,CAACC,MAAN,CAAaC,IAAI,IAAIA,IAAI,CAACC,OAAL,KAAiB,KAAKC,KAAL,CAAWC,WAAX,CAAuBC,IAAvB,CAA4BC,EAAlE,CAAnB;AACA,WAAKC,QAAL,CAAc;AAACnB,QAAAA,UAAU,EAAEA;AAAb,OAAd;AACH,KAlCwB;;AAAA,SAoCzBC,UApCyB,GAoCXmB,KAAD,IAAW;AACrB,YAAMnB,UAAU,GAAGmB,KAAK,CAACR,MAAN,CAAaS,IAAI,IAAIA,IAAI,CAACP,OAAL,KAAiB,KAAKC,KAAL,CAAWC,WAAX,CAAuBC,IAAvB,CAA4BC,EAAlE,CAAnB;AACA,WAAKC,QAAL,CAAc;AAAClB,QAAAA,UAAU,EAAEA;AAAb,OAAd;AACF,KAvCwB;;AAAA,SAyCzBE,aAzCyB,GAyCRC,QAAD,IAAc;AAC1B,YAAMD,aAAa,GAAGC,QAAQ,CAACQ,MAAT,CAAgBU,OAAO,IAAIA,OAAO,CAACR,OAAR,KAAoB,KAAKC,KAAL,CAAWC,WAAX,CAAuBC,IAAvB,CAA4BC,EAA3E,CAAtB;AACA,WAAKC,QAAL,CAAc;AAAChB,QAAAA,aAAa,EAAEA,aAAhB;AAA+BC,QAAAA,QAAQ,EAAEA;AAAzC,OAAd;AACH,KA5CwB;AAAA;;AAgBzB,QAAMmB,iBAAN,GAAyB;AAAA,wBACI,KAAKR,KADT;AAAA,UACbK,KADa,eACbA,KADa;AAAA,UACNT,KADM,eACNA,KADM;AAErB,SAAKQ,QAAL,CAAc;AAACd,MAAAA,SAAS,EAAE;AAACM,QAAAA,KAAK,EAAEA;AAAR;AAAZ,KAAd;AACA,UAAM,KAAKL,aAAL,EAAN;AACA,UAAM,KAAKL,UAAL,CAAgBmB,KAAhB,CAAN;AACA,UAAM,KAAKpB,UAAL,CAAgBW,KAAhB,CAAN;AACH;;AAEDa,EAAAA,kBAAkB,GAAE;AAChB,QAAI,KAAKT,KAAL,CAAWJ,KAAX,KAAqB,KAAKZ,KAAL,CAAWM,SAAX,CAAqBM,KAA9C,EAAqD;AACjD,WAAKX,UAAL,CAAgB,KAAKe,KAAL,CAAWJ,KAA3B,EADiD,CAEjD;AACH;AACJ;;AAiBDc,EAAAA,MAAM,GAAE;AAAA,yBAC8C,KAAKV,KADnD;AAAA,UACIK,KADJ,gBACIA,KADJ;AAAA,UACWT,KADX,gBACWA,KADX;AAAA,UACkBe,UADlB,gBACkBA,UADlB;AAAA,UAC8BV,WAD9B,gBAC8BA,WAD9B;AAAA,wBAEwD,KAAKjB,KAF7D;AAAA,UAEII,aAFJ,eAEIA,aAFJ;AAAA,UAEmBF,UAFnB,eAEmBA,UAFnB;AAAA,UAE+BD,UAF/B,eAE+BA,UAF/B;AAAA,UAE2CI,QAF3C,eAE2CA,QAF3C;AAGJ,WACI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8BY,WAAW,CAACC,IAAZ,CAAiBU,QAA/C,CADJ,EAEQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAiB1B,UAAU,CAAC2B,MAA5B,CAFR,EAGQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAiB5B,UAAU,CAAC4B,MAA5B,CAHR,EAIQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAqBzB,aAAa,CAACyB,MAAnC,CAJR,CADJ,EAOI;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAI,MAAA,SAAS,EAAC,sBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADA,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAiBR,KAAK,CAACQ,MAAvB,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAiBjB,KAAK,CAACiB,MAAvB,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAqBxB,QAAQ,CAACwB,MAA9B,CAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAsBF,UAAU,CAACE,MAAjC,CALJ,CAPJ,CADJ;AAiBH;;AAlEwB;;AAqE7B,MAAMC,eAAe,GAAG9B,KAAK,KAAK;AAC9BY,EAAAA,KAAK,EAAEZ,KAAK,CAACY,KAAN,CAAYA,KADW;AAE9BS,EAAAA,KAAK,EAAErB,KAAK,CAACqB,KAAN,CAAYA,KAFW;AAG9BM,EAAAA,UAAU,EAAE3B,KAAK,CAAC2B,UAAN,CAAiBA,UAHC;AAI9BV,EAAAA,WAAW,EAAEjB,KAAK,CAACkB,IAAN,CAAWD;AAJM,CAAL,CAA7B;;AAOA,eAAenB,OAAO,CAAEgC,eAAF,CAAP,CAA0B/B,IAA1B,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { API } from '../containers/MainPage'\nimport { connect } from 'react-redux'\n\nclass User extends Component {\n    state = {\n        usersVotes: [],\n        usersPosts: [],\n        votesOnUsers: [],\n        usersComments: [],\n        comments: [],\n        prevState: []\n    }\n  \n    fetchComments = () => {\n        fetch(API + 'comments')\n            .then(res => res.json())\n            .then(res => this.usersComments(res))\n    }\n\n    async componentDidMount(){\n        const { posts, votes } = this.props\n        this.setState({prevState: {votes: votes}})\n        await this.fetchComments()\n        await this.usersPosts(posts)\n        await this.usersVotes(votes)\n    }\n\n    componentDidUpdate(){\n        if (this.props.votes === this.state.prevState.votes ){\n            this.usersVotes(this.props.votes)\n            // this.usersPosts(this.props.posts)\n        }\n    }\n\n    usersVotes = (votes) => {\n        const usersVotes = votes.filter(vote => vote.user_id === this.props.currentUser.user.id)\n        this.setState({usersVotes: usersVotes })\n    }\n\n    usersPosts = (posts) => {\n       const usersPosts = posts.filter(post => post.user_id === this.props.currentUser.user.id)\n       this.setState({usersPosts: usersPosts})\n    }\n\n    usersComments = (comments) => {\n        const usersComments = comments.filter(comment => comment.user_id === this.props.currentUser.user.id)\n        this.setState({usersComments: usersComments, comments: comments})\n    }\n\n    render(){\n        const { posts, votes, categories, currentUser } = this.props\n        const { usersComments, usersPosts, usersVotes, comments } = this.state\n        return(\n            <div className='user-card-container'>\n                <div className='user-card-div'>\n                    <h1 className='user-heading'>{currentUser.user.username}</h1>\n                        <p>Total Posts: {usersPosts.length}</p>\n                        <p>Total Votes: {usersVotes.length}</p>\n                        <p>Total Commentss: {usersComments.length}</p>\n                </div>\n                <div className='general-info-card-div'>\n                <h2 className='general-info-heading'> ReadThat General info </h2>\n                    <p>Total Posts: {posts.length}</p>\n                    <p>Total Votes: {votes.length}</p>\n                    <p>Total Commentss: {comments.length}</p>\n                    <p>Total Categories: {categories.length}</p>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    votes: state.votes.votes,\n    posts: state.posts.posts,\n    categories: state.categories.categories,\n    currentUser: state.user.currentUser\n})\n\nexport default connect (mapStateToProps)(User)"]},"metadata":{},"sourceType":"module"}