{"ast":null,"code":"var _jsxFileName = \"/Users/andershornor/Class_Work/ReadThat1/client/src/components/Post.jsx\";\nimport React, { Component } from 'react';\nimport defaultImage from '../images/logo.png';\nimport { API } from '../containers/MainPage';\nimport { connect } from 'react-redux';\nimport NewComment from './forms/NewComment';\nimport Comment from './Comment';\nimport { newComment, fetchComments } from '../actions/commentActions';\nimport { createVote, voteCount } from '../actions/voteActions';\n\nclass Post extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      newComment: '',\n      comments: [],\n      postsVotes: [],\n      displayComments: false,\n      commenting: false,\n      prevState: [],\n      hasUpVoted: false,\n      hasDownVoted: false,\n      renderModalBool: false\n    };\n\n    this.updatePostsVotes = async () => {\n      console.log(\"Update Votes\"); // \tlet postsVotesVar =  await this.props.votes.filter(vote => vote.post_id === this.props.post.id);\n      // \tlet upVotes = await postsVotesVar.filter(vote => vote.is_down_vote === false);\n      // \tlet downVotes =  await postsVotesVar.filter(vote => vote.is_down_vote === true);\n      // \tlet calculatedVoteCount =  await upVotes.length - downVotes.length;\n      // \tthis.setState({ postsVotes: postsVotesVar, voteCount: calculatedVoteCount });\n      // \tif ( upVotes.some(\n      // \t\tvote => vote['user_id'] === this.props.currentUser.user.id && vote['is_down_vote'] === false\n      // \t\t)\n      // \t){ \n      // \t\tawait this.setState({ hasUpVoted: true });\n      // \t} else if ( downVotes.some(\n      // \t\t\tvote => vote['user_id'] === this.props.currentUser.user.id && vote['is_down_vote'] === true\n      // \t\t)\n      // \t){ \n      // \t\tawait this.setState({ hasDownVoted: true });\n      // \t}\n      // \tawait this.props.resetFilterBool()\n    };\n\n    this.votesThings = () => {\n      console.log(\"votesThings\"); // const { votes, post, currentUser } = this.props;\n      // let postsVotesVar = votes.filter(vote => vote.post_id === post.id);\n      // let upVotes = postsVotesVar.filter(vote => vote.is_down_vote === false);\n      // let downVotes = postsVotesVar.filter(vote => vote.is_down_vote === true);\n      // let calculatedVoteCount = upVotes.length - downVotes.length;\n      // // this.props.postsFilter(post.id, calculatedVoteCount)\n      // this.setState({ postsVotes: postsVotesVar, voteCount: calculatedVoteCount });\n      // if ( upVotes.some(\n      // \t\tvote => vote['user_id'] === currentUser.user.id && vote['is_down_vote'] === false\n      // \t)\n      // ) {\n      //  this.setState({ hasUpVoted: true });\n      // } else if ( downVotes.some(\n      // \t\tvote => vote['user_id'] === currentUser.user.id && vote['is_down_vote'] === true\n      // \t)\n      // )\n      //  this.setState({ hasDownVoted: true });\n    };\n\n    this.commentOnPost = () => {\n      const commenting = this.state.commenting;\n      this.setState({\n        commenting: !commenting\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        newComment: e.target.value\n      });\n    };\n\n    this.handleSubmit = (e, key, value) => {\n      e.preventDefault();\n      this.state.newComment.length > 0 ? this.postComment(key, value) : window.alert('No Empty Comments');\n    };\n\n    this.postComment = (key, value) => {\n      const _this$state = this.state,\n            comments = _this$state.comments,\n            newComment = _this$state.newComment,\n            commenting = _this$state.commenting;\n      const currentUser = this.props.currentUser;\n      fetch(API + 'comments', {\n        method: 'POST',\n        headers: {\n          Authorization: \"Bearer \".concat(localStorage.getItem(currentUser.user.id)),\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        },\n        body: JSON.stringify({\n          comment: {\n            content: newComment,\n            user_id: currentUser.user.id,\n            [key]: value\n          }\n        })\n      }).then(res => res.json()).then(comment => {\n        comment.errors ? alert(comment.errors) : this.setState({\n          comments: [...comments, comment]\n        });\n      }).then(this.setState({\n        commenting: !commenting\n      }));\n    };\n\n    this.displayComments = async () => {\n      const post = this.props.post;\n      await fetch(API + 'comments/' + \"\".concat(post.id)).then(res => res.json()).then(comments => this.setState({\n        comments: comments\n      }));\n      this.setState({\n        displayComments: !this.state.displayComments\n      });\n\n      if (this.state.comments.length === 0) {\n        alert(\"Currently No Comments...Be the First to Write One!\");\n      }\n    };\n\n    this.rapidVoteIncrement = async e => {\n      const _this$props = this.props,\n            createVote = _this$props.createVote,\n            voteCount = _this$props.voteCount,\n            post = _this$props.post;\n      createVote(post.id, e.target.name);\n      voteCount();\n\n      if (e.target.name === 'up' && !this.state.hasDownVoted && !this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount + 1,\n          hasUpVoted: true\n        });\n        console.log('up1');\n      } else if (e.target.name === 'up' && this.state.hasDownVoted && !this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount + 2,\n          hasDownVoted: false,\n          hasUpVoted: true\n        });\n        console.log('up2');\n      } else if (e.target.name === 'up' && !this.state.hasDownVoted && this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount - 1,\n          hasDownVoted: false,\n          hasUpVoted: false\n        });\n        console.log('up3');\n      } else if (e.target.name === 'down' && !this.state.hasDownVoted && !this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount - 1,\n          hasDownVoted: true\n        });\n        console.log('down1');\n      } else if (e.target.name === 'down' && !this.state.hasDownVoted && this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount - 2,\n          hasUpVoted: false,\n          hasDownVoted: true\n        });\n        console.log('down2');\n      } else if (e.target.name === 'down' && this.state.hasDownVoted && !this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount + 1,\n          hasDownVoted: false,\n          hasUpVoted: false\n        });\n        console.log('down3');\n      }\n    };\n\n    this.renderModal = () => {\n      this.setState({\n        renderModalBool: !this.state.renderModalBool\n      });\n    };\n  }\n\n  async componentDidMount() {\n    await this.votesThings();\n  }\n\n  async componentDidUpdate() {\n    if (this.props.filterBool) {\n      await this.updatePostsVotes();\n    } else if (this.props.updateBool) {\n      await this.votesThings;\n    }\n  }\n\n  render() {\n    const _this$props$post = this.props.post,\n          img = _this$props$post.img,\n          title = _this$props$post.title,\n          content = _this$props$post.content,\n          link = _this$props$post.link,\n          uploadedFile = _this$props$post.uploadedFile,\n          id = _this$props$post.id;\n    const _this$props2 = this.props,\n          post = _this$props2.post,\n          currentUser = _this$props2.currentUser,\n          voteCount = _this$props2.voteCount;\n    const _this$state2 = this.state,\n          commenting = _this$state2.commenting,\n          comments = _this$state2.comments;\n    let image;\n\n    if (!img && !uploadedFile) {\n      image = defaultImage;\n    } else if (!img && uploadedFile) {\n      image = uploadedFile;\n    } else {\n      image = defaultImage;\n    }\n\n    return this.state.renderModalBool ? React.createElement(\"div\", {\n      className: \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-content-post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, title), React.createElement(\"div\", {\n      className: \"contents-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-post-img-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"modal-post-img\",\n      src: image,\n      alt: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"content-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, content, link)), React.createElement(\"div\", {\n      className: \"button-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Doots: \", voteCount[post.id]), React.createElement(\"button\", {\n      name: \"up\",\n      onClick: e => this.rapidVoteIncrement(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"\\u25B2\"), React.createElement(\"button\", {\n      name: \"down\",\n      onClick: e => this.rapidVoteIncrement(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"\\u25BC\"), React.createElement(\"button\", {\n      onClick: e => this.commentOnPost(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Comment\"), commenting ? React.createElement(NewComment, {\n      variableKey: 'post_id',\n      value: id,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      commentOnPost: this.commentOnPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }) : null, React.createElement(\"button\", {\n      onClick: e => this.displayComments(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Display Comments\"), React.createElement(\"button\", {\n      onClick: e => this.renderModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Close Post\"), React.createElement(\"ul\", {\n      className: \"post-ul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, this.state.displayComments && comments.length > 0 ? comments.map(comment => {\n      return React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Comment, {\n        comment: comment,\n        comments: comments,\n        commenting: commenting,\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        displayComments: this.displayComments,\n        commentOnPost: this.commentOnPost,\n        currentUser: currentUser,\n        post: post,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }));\n    }) : null)))) : React.createElement(\"div\", {\n      className: \"post-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, title), React.createElement(\"div\", {\n      className: \"contents-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"post-img-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"post-img\",\n      src: image,\n      alt: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"content-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, content, link)), React.createElement(\"div\", {\n      className: \"button-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"Doots: \", voteCount[post.id]), React.createElement(\"button\", {\n      name: \"up\",\n      onClick: e => this.rapidVoteIncrement(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, \"\\u25B2\"), React.createElement(\"button\", {\n      name: \"down\",\n      onClick: e => this.rapidVoteIncrement(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"\\u25BC\"), React.createElement(\"button\", {\n      onClick: e => this.commentOnPost(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"Comment\"), commenting ? React.createElement(NewComment, {\n      variableKey: 'post_id',\n      value: id,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      commentOnPost: this.commentOnPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }) : null, React.createElement(\"button\", {\n      onClick: e => this.displayComments(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, \"Display Comments\"), React.createElement(\"button\", {\n      onClick: e => this.renderModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Enlarge Post\"), React.createElement(\"ul\", {\n      className: \"post-ul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, this.state.displayComments && comments.length > 0 ? comments.map(comment => {\n      return React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(Comment, {\n        comment: comment,\n        comments: comments,\n        commenting: commenting,\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        displayComments: this.displayComments,\n        commentOnPost: this.commentOnPost,\n        currentUser: currentUser,\n        post: post,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }));\n    }) : null)));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.user.currentUser,\n  votes: state.votes.votes,\n  voteCount: state.votes.voteCount\n});\n\nexport default connect(mapStateToProps, {\n  createVote\n})(Post); // =============================================================================================================\n// voteOnPost = () => {\n// \tconst { currentUser, post } = this.props\n// \tconst { votes } = this.state\n// \tconsole.log('vote')\n// \tfetch(API + 'votes', {\n// \t\tmethod: 'POST',\n// \t\theaders: {'Authorization': `Bearer ${localStorage.getItem(currentUser)}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n// \t\tbody: JSON.stringify({vote: {post: post, user: currentUser.id}})\n// \t}).then(res => res.json()).then(vote => { vote.errors ? alert(vote.errors) :\n// \t\tthis.setState({votes: [...votes, vote]})})\n// \t//\n// }\n// unvoteOnPost = (e) => {\n// \tconst { currentUser, post } = this.props\n// \tconsole.log('unvote')\n// \tfetch(API + 'votes/delete', {\n// \t\tmethod: 'POST',\n// \t\theaders: {'Authorization': `Bearer ${localStorage.getItem(currentUser)}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n// \t\tbody: JSON.stringify({vote: {post: post, user: currentUser.id}})\n// \t}).then(res => res.json()).then(votes => this.setState({votes: votes})).then(this.countDownVotes())\n// }\n// countDownVotes = () => {\n// \tconst { votes } = this.state\n// \tif (votes.length > 0){\n// \t\tvotes.forEach(vote => {\n// \t\t\tif (vote.is_down_vote){\n// \t\t\t\tthis.setState({downVoteCount: this.state.downVoteCount++})\n// \t\t\t}\n// \t\t})\n// \t}\n// }","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/components/Post.jsx"],"names":["React","Component","defaultImage","API","connect","NewComment","Comment","newComment","fetchComments","createVote","voteCount","Post","state","comments","postsVotes","displayComments","commenting","prevState","hasUpVoted","hasDownVoted","renderModalBool","updatePostsVotes","console","log","votesThings","commentOnPost","setState","handleChange","e","target","value","handleSubmit","key","preventDefault","length","postComment","window","alert","currentUser","props","fetch","method","headers","Authorization","localStorage","getItem","user","id","Accept","body","JSON","stringify","comment","content","user_id","then","res","json","errors","post","rapidVoteIncrement","name","renderModal","componentDidMount","componentDidUpdate","filterBool","updateBool","render","img","title","link","uploadedFile","image","map","mapStateToProps","votes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport defaultImage from '../images/logo.png';\nimport { API } from '../containers/MainPage';\nimport { connect } from 'react-redux'\nimport NewComment from './forms/NewComment';\nimport Comment from './Comment';\nimport { newComment, fetchComments } from '../actions/commentActions'\nimport { createVote, voteCount } from '../actions/voteActions'\n\nclass Post extends Component {\n\tstate = {\n\t\tnewComment: '',\n\t\tcomments: [],\n\t\tpostsVotes: [],\n\t\tdisplayComments: false,\n\t\tcommenting: false,\n\t\tprevState: [],\n\t\thasUpVoted: false,\n\t\thasDownVoted: false,\n\t\trenderModalBool: false\n\t};\n\n\tasync componentDidMount() {\n\t\tawait this.votesThings()\n\t}\n\n\tasync componentDidUpdate() {\n\t\tif (this.props.filterBool){\n\t\t await this.updatePostsVotes()\n\t\t}\n\t\telse if(this.props.updateBool){\n\t\tawait this.votesThings\n\t\t}\n\t}\n\n\tupdatePostsVotes = async () => {\n\t\tconsole.log(\"Update Votes\")\n\t// \tlet postsVotesVar =  await this.props.votes.filter(vote => vote.post_id === this.props.post.id);\n\t// \tlet upVotes = await postsVotesVar.filter(vote => vote.is_down_vote === false);\n\t// \tlet downVotes =  await postsVotesVar.filter(vote => vote.is_down_vote === true);\n\t// \tlet calculatedVoteCount =  await upVotes.length - downVotes.length;\n\t// \tthis.setState({ postsVotes: postsVotesVar, voteCount: calculatedVoteCount });\n\t// \tif ( upVotes.some(\n\t// \t\tvote => vote['user_id'] === this.props.currentUser.user.id && vote['is_down_vote'] === false\n\t// \t\t)\n\t// \t){ \n\t// \t\tawait this.setState({ hasUpVoted: true });\n\t// \t} else if ( downVotes.some(\n\t// \t\t\tvote => vote['user_id'] === this.props.currentUser.user.id && vote['is_down_vote'] === true\n\t// \t\t)\n\t// \t){ \n\t// \t\tawait this.setState({ hasDownVoted: true });\n\t// \t}\n\t// \tawait this.props.resetFilterBool()\n\t}\n\n\tvotesThings = () => {\n\t\tconsole.log(\"votesThings\")\n\t\t// const { votes, post, currentUser } = this.props;\n\t\t// let postsVotesVar = votes.filter(vote => vote.post_id === post.id);\n\t\t// let upVotes = postsVotesVar.filter(vote => vote.is_down_vote === false);\n\t\t// let downVotes = postsVotesVar.filter(vote => vote.is_down_vote === true);\n\t\t// let calculatedVoteCount = upVotes.length - downVotes.length;\n\t \t// // this.props.postsFilter(post.id, calculatedVoteCount)\n\t\t// this.setState({ postsVotes: postsVotesVar, voteCount: calculatedVoteCount });\n\t\t// if ( upVotes.some(\n\t\t// \t\tvote => vote['user_id'] === currentUser.user.id && vote['is_down_vote'] === false\n\t\t// \t)\n\t\t// ) {\n\t\t//  this.setState({ hasUpVoted: true });\n\t\t// } else if ( downVotes.some(\n\t\t// \t\tvote => vote['user_id'] === currentUser.user.id && vote['is_down_vote'] === true\n\t\t// \t)\n\t\t// )\n\t\t//  this.setState({ hasDownVoted: true });\n\t}\n\n\tcommentOnPost = () => {\n\t\tconst { commenting } = this.state;\n\t\tthis.setState({ commenting: !commenting });\n\t};\n\n\thandleChange = e => {\n\t\tthis.setState({ newComment: e.target.value });\n\t};\n\n\thandleSubmit = (e, key, value) => {\n\t\te.preventDefault();\n\t\tthis.state.newComment.length > 0\n\t\t\t? this.postComment(key, value)\n\t\t\t: window.alert('No Empty Comments');\n\t};\n\n\tpostComment = (key, value) => {\n\t\tconst { comments, newComment, commenting } = this.state;\n\t\tconst { currentUser } = this.props;\n\t\tfetch(API + 'comments', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(currentUser.user.id)}`,\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAccept: 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tcomment: { content: newComment, user_id: currentUser.user.id, [key]: value }\n\t\t\t})\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(comment => {\n\t\t\t\tcomment.errors\n\t\t\t\t\t? alert(comment.errors)\n\t\t\t\t\t: this.setState({ comments: [...comments, comment] });\n\t\t\t})\n\t\t\t.then(this.setState({ commenting: !commenting }));\n\t};\n\n\tdisplayComments = async () => {\n\t\tconst { post } = this.props;\n\t\tawait fetch(API + 'comments/' + `${post.id}`)\n\t\t\t.then(res => res.json())\n\t\t\t.then(comments => this.setState({ comments: comments }));\n\t\tthis.setState({ displayComments: !this.state.displayComments });\n\t\tif (this.state.comments.length === 0){\n\t\t\talert(\"Currently No Comments...Be the First to Write One!\")\n\t\t} \n\t};\n\n\trapidVoteIncrement = async (e) => {\n\t\tconst { createVote, voteCount, post } = this.props;\n\t\tcreateVote(post.id, e.target.name)\n\t\tvoteCount()\n\t\tif (e.target.name === 'up' && !this.state.hasDownVoted && !this.state.hasUpVoted ) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount + 1, hasUpVoted: true });\n\t\t\tconsole.log('up1')\n\t\t} else if (e.target.name === 'up' && this.state.hasDownVoted && !this.state.hasUpVoted) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount + 2, hasDownVoted: false, hasUpVoted: true });\n\t\t\tconsole.log('up2')\n\t\t} else if (e.target.name === 'up' && !this.state.hasDownVoted && this.state.hasUpVoted) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount - 1, hasDownVoted: false, hasUpVoted: false });\n\t\t\tconsole.log('up3')\n\t\t} else if (e.target.name === 'down' && !this.state.hasDownVoted && !this.state.hasUpVoted) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount - 1, hasDownVoted: true });\n\t\t\tconsole.log('down1')\n\t\t} else if (e.target.name === 'down'&& !this.state.hasDownVoted  && this.state.hasUpVoted ) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount - 2, hasUpVoted: false, hasDownVoted: true });\n\t\t\tconsole.log('down2')\n\t\t} else if (e.target.name === 'down' && this.state.hasDownVoted && !this.state.hasUpVoted) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount + 1, hasDownVoted: false, hasUpVoted: false });\n\t\t\tconsole.log('down3')\n\t\t}\n\t};\n\n\trenderModal = () => {\n\t\tthis.setState({renderModalBool: !this.state.renderModalBool})\n\t}\n\n\trender() {\n\t\tconst { img, title, content, link, uploadedFile, id} = this.props.post;\n\t\tconst { post, currentUser, voteCount} = this.props\n\t\tconst { commenting, comments  } = this.state;\n\t\tlet image;\n\t\tif (!img && !uploadedFile) {\n\t\t\timage = defaultImage;\n\t\t} else if(!img && uploadedFile) {\n\t\t\timage = uploadedFile;\n\t\t} else {\n\t\t\timage = defaultImage\n\t\t}\n\t\treturn (\n\t\t\tthis.state.renderModalBool ? \n\t\t\t<div className=\"modal\">\n\t\t\t\t<div className='modal-content-post'>\n\t\t\t\t<div className='title-container'>{title}</div>\n\t\t\t\t<div className='contents-container'>\n\t\t\t\t<div className='modal-post-img-container'>\n\t\t\t\t\t<img className='modal-post-img' src={image} alt={title} />\n\t\t\t\t</div>\n\t\t\t\t<div className='content-container'>\n\t\t\t\t\t{content}\n\t\t\t\t\t{link}\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='button-container'>\n\t\t\t\t\t<span>Doots: {voteCount[post.id]}</span>\n\t\t\t\t\t<button name='up' onClick={e => this.rapidVoteIncrement(e)}>\n\t\t\t\t\t\t▲\n\t\t\t\t\t</button>\n\t\t\t\t\t<button name='down' onClick={e => this.rapidVoteIncrement(e)}>\n\t\t\t\t\t\t▼\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={e => this.commentOnPost(e)}>Comment</button>\n\t\t\t\t\t{commenting ? (\n\t\t\t\t\t\t<NewComment\n\t\t\t\t\t\t\tvariableKey={'post_id'}\n\t\t\t\t\t\t\tvalue={id}\n\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t\t\tcommentOnPost={this.commentOnPost}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<button onClick={e => this.displayComments(e)}>Display Comments</button>\n\t\t\t\t\t<button onClick={e => this.renderModal()}>Close Post</button>\n\t\t\t\t\t<ul className='post-ul'>\n\t\t\t\t\t\t{this.state.displayComments && comments.length > 0\n\t\t\t\t\t\t\t? comments.map(comment => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<Comment\n\t\t\t\t\t\t\t\t\t\t\t\tcomment={comment}\n\t\t\t\t\t\t\t\t\t\t\t\tcomments={comments}\n\t\t\t\t\t\t\t\t\t\t\t\tcommenting={commenting}\n\t\t\t\t\t\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayComments={this.displayComments}\n\t\t\t\t\t\t\t\t\t\t\t\tcommentOnPost={this.commentOnPost}\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t\t\t\t\t\t\t\tpost={post}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t:\t\n\t\t<div className='post-card'>\n\t\t\t\t<div className='title-container'>{title}</div>\n\t\t\t\t<div className='contents-container'>\n\t\t\t\t<div className='post-img-container'>\n\t\t\t\t\t<img className='post-img' src={image} alt={title} />\n\t\t\t\t</div>\n\t\t\t\t<div className='content-container'>\n\t\t\t\t\t{content}\n\t\t\t\t\t{link}\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='button-container'>\n\t\t\t\t\t<span>Doots: {voteCount[post.id]}</span>\n\t\t\t\t\t<button name='up' onClick={e => this.rapidVoteIncrement(e)}>\n\t\t\t\t\t\t▲\n\t\t\t\t\t</button>\n\t\t\t\t\t<button name='down' onClick={e => this.rapidVoteIncrement(e)}>\n\t\t\t\t\t\t▼\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={e => this.commentOnPost(e)}>Comment</button>\n\t\t\t\t\t{commenting ? (\n\t\t\t\t\t\t<NewComment\n\t\t\t\t\t\t\tvariableKey={'post_id'}\n\t\t\t\t\t\t\tvalue={id}\n\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t\t\tcommentOnPost={this.commentOnPost}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<button onClick={e => this.displayComments(e)}>Display Comments</button>\n\t\t\t\t\t<button onClick={e => this.renderModal()}>Enlarge Post</button>\n\t\t\t\t\t<ul className='post-ul'>\n\t\t\t\t\t\t{this.state.displayComments && comments.length > 0\n\t\t\t\t\t\t\t? comments.map(comment => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<Comment\n\t\t\t\t\t\t\t\t\t\t\t\tcomment={comment}\n\t\t\t\t\t\t\t\t\t\t\t\tcomments={comments}\n\t\t\t\t\t\t\t\t\t\t\t\tcommenting={commenting}\n\t\t\t\t\t\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayComments={this.displayComments}\n\t\t\t\t\t\t\t\t\t\t\t\tcommentOnPost={this.commentOnPost}\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t\t\t\t\t\t\t\tpost={post}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tcurrentUser: state.user.currentUser,\n\tvotes: state.votes.votes,\n\tvoteCount: state.votes.voteCount\n})\n\nexport default connect(mapStateToProps, { createVote })(Post);\n\n// =============================================================================================================\n// voteOnPost = () => {\n// \tconst { currentUser, post } = this.props\n// \tconst { votes } = this.state\n// \tconsole.log('vote')\n// \tfetch(API + 'votes', {\n// \t\tmethod: 'POST',\n// \t\theaders: {'Authorization': `Bearer ${localStorage.getItem(currentUser)}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n// \t\tbody: JSON.stringify({vote: {post: post, user: currentUser.id}})\n// \t}).then(res => res.json()).then(vote => { vote.errors ? alert(vote.errors) :\n// \t\tthis.setState({votes: [...votes, vote]})})\n// \t//\n// }\n\n// unvoteOnPost = (e) => {\n// \tconst { currentUser, post } = this.props\n// \tconsole.log('unvote')\n\n// \tfetch(API + 'votes/delete', {\n// \t\tmethod: 'POST',\n// \t\theaders: {'Authorization': `Bearer ${localStorage.getItem(currentUser)}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n// \t\tbody: JSON.stringify({vote: {post: post, user: currentUser.id}})\n// \t}).then(res => res.json()).then(votes => this.setState({votes: votes})).then(this.countDownVotes())\n// }\n\n// countDownVotes = () => {\n// \tconst { votes } = this.state\n// \tif (votes.length > 0){\n// \t\tvotes.forEach(vote => {\n// \t\t\tif (vote.is_down_vote){\n// \t\t\t\tthis.setState({downVoteCount: this.state.downVoteCount++})\n// \t\t\t}\n// \t\t})\n// \t}\n// }\n"]},"metadata":{},"sourceType":"module"}