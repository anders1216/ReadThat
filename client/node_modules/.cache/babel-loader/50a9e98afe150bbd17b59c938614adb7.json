{"ast":null,"code":"import { FETCH_VOTES, NEW_VOTE, VOTE_COUNT_POSTS, VOTE_COUNT_COMMENTS } from './types';\nimport { API } from '../containers/MainPage';\nexport const fetchVotes = () => async dispatch => {\n  await fetch(API + 'votes').then(res => res.json()).then(votes => dispatch({\n    type: FETCH_VOTES,\n    payload: votes\n  }));\n};\nexport const createVote = (ID, e, comment) => async (dispatch, getState) => {\n  const token = getState().user.token;\n  const currentUser = getState().user.currentUser;\n  let placeHolder;\n  let vote;\n  let bool = true;\n  if (e === 'up') bool = false;\n\n  if (comment) {\n    vote = {\n      comment_id: ID,\n      user_id: currentUser.user.id,\n      is_down_vote: bool\n    };\n  } else {\n    vote = {\n      post_id: ID,\n      user_id: currentUser.user.id,\n      is_down_vote: bool\n    };\n  }\n\n  await fetch(API + 'votes', {\n    method: 'POST',\n    headers: {\n      Authorization: \"Bearer \".concat(token),\n      'Content-Type': 'application/json',\n      Accept: 'application/json'\n    },\n    body: JSON.stringify({\n      vote\n    })\n  }).then(res => res.json()).then(vote => {\n    vote.message ? placeHolder = vote.votes : placeHolder = vote;\n  });\n  await dispatch({\n    type: NEW_VOTE,\n    payload: {\n      votes: placeHolder,\n      updateBool: true\n    }\n  });\n};\nexport const voteCount = (comOrPost = \"post\") => async (dispatch, getState) => {\n  const votes = await getState().votes.votes;\n  let placeholder = {};\n  await votes.forEach(vote => {\n    if (placeholder[vote[\"\".concat(comOrPost, \"_id\")]]) {\n      if (vote.is_down_vote) {\n        placeholder[vote[\"\".concat(comOrPost, \"_id\")]] -= 1;\n      } else {\n        placeholder[vote[\"\".concat(comOrPost, \"_id\")]] += 1;\n      }\n    } else {\n      if (vote.is_down_vote) {\n        placeholder[vote[\"\".concat(comOrPost, \"_id\")]] = -1;\n      } else if (vote[\"\".concat(comOrPost, \"_id\")] > 0) {\n        placeholder[vote[\"\".concat(comOrPost, \"_id\")]] = 1;\n      } else {}\n    }\n  });\n\n  if (comOrPost === \"post\") {\n    await dispatch({\n      type: VOTE_COUNT_POSTS,\n      payload: placeholder\n    });\n  } else if (comOrPost === \"comment\") {\n    await dispatch({\n      type: VOTE_COUNT_COMMENTS,\n      payload: placeholder\n    });\n  }\n};","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/actions/voteActions.jsx"],"names":["FETCH_VOTES","NEW_VOTE","VOTE_COUNT_POSTS","VOTE_COUNT_COMMENTS","API","fetchVotes","dispatch","fetch","then","res","json","votes","type","payload","createVote","ID","e","comment","getState","token","user","currentUser","placeHolder","vote","bool","comment_id","user_id","id","is_down_vote","post_id","method","headers","Authorization","Accept","body","JSON","stringify","message","updateBool","voteCount","comOrPost","placeholder","forEach"],"mappings":"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","sourcesContent":["import { FETCH_VOTES, NEW_VOTE, VOTE_COUNT_POSTS, VOTE_COUNT_COMMENTS } from './types'\nimport { API } from '../containers/MainPage'\n\n    export const fetchVotes = () => async dispatch => {\n        await fetch(API + 'votes')\n            .then(res => res.json())\n            .then(votes => dispatch({ \n                type: FETCH_VOTES,\n                payload: votes })\n            );\n\t}\n\t\n    export const createVote = (ID, e, comment) => async (dispatch, getState) => {\n\t\tconst token = getState().user.token\n\t\tconst currentUser = getState().user.currentUser\n\t\tlet placeHolder;\n\t\tlet vote;\n\t\tlet bool = true\n\t\tif (e === 'up')\n\t\t\tbool = false\n\t\tif(comment){\n\t\t\tvote = {\n\t\t\t\tcomment_id: ID,\n\t\t\t\tuser_id: currentUser.user.id,\n\t\t\t\tis_down_vote: bool\n\t\t\t}\n\t\t}else{\n\t\t\tvote = {\n\t\t\t\tpost_id: ID,\n\t\t\t\tuser_id: currentUser.user.id,\n\t\t\t\tis_down_vote: bool\n\t\t\t}\n\t\t}\n\t\tawait fetch(API + 'votes', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\t\t'Content-Type': 'application/json',\t\n\t\t\t\t\tAccept: 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ \n\t\t\t\t\tvote\n\t\t\t\t})\n\t\t\t})\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(vote => {\n\t\t\t\t\tvote.message ? \n\t\t\t\t\tplaceHolder = vote.votes\n\t\t\t\t\t: \n\t\t\t\t\tplaceHolder = vote;\n\t\t\t\t})\n\t\t\t\t\n\t\tawait dispatch({\n\t\t\ttype: NEW_VOTE,\n\t\t\tpayload: {\n\t\t\t\tvotes: placeHolder,\n\t\t\t\tupdateBool:true\n\t\t\t}\n\t\t})\n\t};\n\n\texport const voteCount = (comOrPost = \"post\") => async (dispatch, getState) => {\n\t\tconst votes = await getState().votes.votes\n\t\tlet placeholder = {};\n\t\t\tawait votes.forEach(vote => {\n\t\t\t\tif(placeholder[vote[`${comOrPost}_id`]]){\n\t\t\t\t\tif(vote.is_down_vote){\n\t\t\t\t\t\tplaceholder[vote[`${comOrPost}_id`]] -= 1\n\t\t\t\t\t}else{\n\t\t\t\t\t\tplaceholder[vote[`${comOrPost}_id`]] += 1\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(vote.is_down_vote){\n\t\t\t\t\t\tplaceholder[vote[`${comOrPost}_id`]] = -1\n\t\t\t\t\t}else if(vote[`${comOrPost}_id`] > 0){\n\t\t\t\t\t\tplaceholder[vote[`${comOrPost}_id`]] = 1\n\t\t\t\t\t}else{\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\tif(comOrPost === \"post\"){\n\n\t\t\tawait dispatch({\n\t\t\t\ttype: VOTE_COUNT_POSTS,\n\t\t\t\tpayload: placeholder\n\t\t\t})\n\t\t}else if (comOrPost === \"comment\"){\n\n\t\t\tawait dispatch({\n\t\t\t\ttype: VOTE_COUNT_COMMENTS,\n\t\t\t\tpayload: placeholder\n\t\t\t})\n\t\t}\n\t}"]},"metadata":{},"sourceType":"module"}