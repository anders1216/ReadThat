{"ast":null,"code":"import { FETCH_VOTES, NEW_VOTE } from './types';\nimport { API } from '../containers/MainPage';\nexport const fetchVotes = () => dispatch => {\n  fetch(API + 'votes').then(res => res.json()).then(votes => dispatch({\n    type: FETCH_VOTES,\n    payload: votes\n  }));\n};\nexport const createVote = (postID, e) => async (dispatch, getState) => {\n  const token = localStorage.getItem('user-token');\n  const currentUser = getState().user.currentUser;\n  let placeHolder;\n  e === 'up' ? await fetch(API + 'votes', {\n    method: 'POST',\n    headers: {\n      Authorization: \"Bearer \".concat(token),\n      'Content-Type': 'application/json',\n      Accept: 'application/json'\n    },\n    body: JSON.stringify({\n      vote: {\n        post_id: postID,\n        user_id: currentUser.user.id,\n        is_down_vote: false\n      }\n    })\n  }).then(res => res.json()).then(vote => {\n    vote.message ? placeHolder = vote.votes : placeHolder = vote;\n  }) : await fetch(API + 'votes/delete', {\n    method: 'POST',\n    headers: {\n      Authorization: \"Bearer \".concat(token),\n      'Content-Type': 'application/json',\n      Accept: 'application/json'\n    },\n    body: JSON.stringify({\n      vote: {\n        post_id: postID,\n        user_id: currentUser.user.id,\n        is_down_vote: true\n      }\n    })\n  }).then(res => res.json()).then(vote => {\n    vote.message ? placeHolder = vote.votes : placeHolder = vote;\n  });\n  await dispatch({\n    type: NEW_VOTE,\n    payload: {\n      votes: placeHolder,\n      updateBool: true\n    }\n  });\n};","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/actions/voteActions.jsx"],"names":["FETCH_VOTES","NEW_VOTE","API","fetchVotes","dispatch","fetch","then","res","json","votes","type","payload","createVote","postID","e","getState","token","localStorage","getItem","currentUser","user","placeHolder","method","headers","Authorization","Accept","body","JSON","stringify","vote","post_id","user_id","id","is_down_vote","message","updateBool"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,QAAtB,QAAsC,SAAtC;AACA,SAASC,GAAT,QAAoB,wBAApB;AAEI,OAAO,MAAMC,UAAU,GAAG,MAAMC,QAAQ,IAAI;AACxCC,EAAAA,KAAK,CAACH,GAAG,GAAG,OAAP,CAAL,CACKI,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEKF,IAFL,CAEUG,KAAK,IAAIL,QAAQ,CAAC;AACpBM,IAAAA,IAAI,EAAEV,WADc;AAEpBW,IAAAA,OAAO,EAAEF;AAFW,GAAD,CAF3B;AAMN,CAPS;AASP,OAAO,MAAMG,UAAU,GAAG,CAACC,MAAD,EAASC,CAAT,KAAe,OAAOV,QAAP,EAAiBW,QAAjB,KAA8B;AACzE,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAd;AACA,QAAMC,WAAW,GAAGJ,QAAQ,GAAGK,IAAX,CAAgBD,WAApC;AACM,MAAIE,WAAJ;AACNP,EAAAA,CAAC,KAAK,IAAN,GAEC,MAAMT,KAAK,CAACH,GAAG,GAAG,OAAP,EAAgB;AACzBoB,IAAAA,MAAM,EAAE,MADiB;AAEzBC,IAAAA,OAAO,EAAE;AACRC,MAAAA,aAAa,mBAAYR,KAAZ,CADL;AAER,sBAAgB,kBAFR;AAGRS,MAAAA,MAAM,EAAE;AAHA,KAFgB;AAOzBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACpBC,MAAAA,IAAI,EAAE;AACLC,QAAAA,OAAO,EAAEjB,MADJ;AAELkB,QAAAA,OAAO,EAAEZ,WAAW,CAACC,IAAZ,CAAiBY,EAFrB;AAGLC,QAAAA,YAAY,EAAE;AAHT;AADc,KAAf;AAPmB,GAAhB,CAAL,CAeH3B,IAfG,CAeEC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAfT,EAgBHF,IAhBG,CAgBEuB,IAAI,IAAI;AACbA,IAAAA,IAAI,CAACK,OAAL,GACAb,WAAW,GAAGQ,IAAI,CAACpB,KADnB,GAGAY,WAAW,GAAGQ,IAHd;AAIA,GArBG,CAFP,GAyBC,MAAMxB,KAAK,CAACH,GAAG,GAAG,cAAP,EAAuB;AAChCoB,IAAAA,MAAM,EAAE,MADwB;AAEhCC,IAAAA,OAAO,EAAE;AACRC,MAAAA,aAAa,mBAAYR,KAAZ,CADL;AAER,sBAAgB,kBAFR;AAGRS,MAAAA,MAAM,EAAE;AAHA,KAFuB;AAOhCC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACpBC,MAAAA,IAAI,EAAE;AACLC,QAAAA,OAAO,EAAEjB,MADJ;AAELkB,QAAAA,OAAO,EAAEZ,WAAW,CAACC,IAAZ,CAAiBY,EAFrB;AAGLC,QAAAA,YAAY,EAAE;AAHT;AADc,KAAf;AAP0B,GAAvB,CAAL,CAeH3B,IAfG,CAeEC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAfT,EAgBHF,IAhBG,CAgBGuB,IAAI,IACV;AACAA,IAAAA,IAAI,CAACK,OAAL,GACAb,WAAW,GAAGQ,IAAI,CAACpB,KADnB,GAGAY,WAAW,GAAGQ,IAHd;AAIA,GAtBG,CAzBP;AAiDE,QAAMzB,QAAQ,CAAC;AACdM,IAAAA,IAAI,EAAET,QADQ;AAEdU,IAAAA,OAAO,EAAE;AACRF,MAAAA,KAAK,EAAEY,WADC;AAERc,MAAAA,UAAU,EAAC;AAFH;AAFK,GAAD,CAAd;AAOF,CA5DS","sourcesContent":["import { FETCH_VOTES, NEW_VOTE } from './types'\nimport { API } from '../containers/MainPage'\n\n    export const fetchVotes = () => dispatch => {\n        fetch(API + 'votes')\n            .then(res => res.json())\n            .then(votes => dispatch({ \n                type: FETCH_VOTES,\n                payload: votes })\n            );\n\t}\n\t\n    export const createVote = (postID, e) => async (dispatch, getState) => {\n\t\tconst token = localStorage.getItem('user-token')\n\t\tconst currentUser = getState().user.currentUser\n        let placeHolder;\n\t\te === 'up'\n\t\t\t? \n\t\t\tawait fetch(API + 'votes', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\t\t\t'Content-Type': 'application/json',\t\n\t\t\t\t\t\tAccept: 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({ \n\t\t\t\t\t\tvote: {\n\t\t\t\t\t\t\tpost_id: postID,\n\t\t\t\t\t\t\tuser_id: currentUser.user.id,\n\t\t\t\t\t\t\tis_down_vote: false \n\t\t\t\t\t\t} \n\t\t\t\t\t})\n\t\t\t  })\n\t\t\t\t\t.then(res => res.json())\n\t\t\t\t\t.then(vote => {\n\t\t\t\t\t\tvote.message ? \n\t\t\t\t\t\tplaceHolder = vote.votes\n\t\t\t\t\t\t: \n\t\t\t\t\t\tplaceHolder = vote;\n\t\t\t\t\t})\n\t\t\t: \n\t\t\tawait fetch(API + 'votes/delete', {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\tAccept: 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({ \n\t\t\t\t\t\tvote: { \n\t\t\t\t\t\t\tpost_id: postID,\n\t\t\t\t\t\t\tuser_id: currentUser.user.id,\n\t\t\t\t\t\t\tis_down_vote: true \n\t\t\t\t\t\t} \n\t\t\t\t\t})\n\t\t\t  })\n\t\t\t\t\t.then(res => res.json())\n\t\t\t\t\t.then( vote =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\tvote.message ? \n\t\t\t\t\t\tplaceHolder = vote.votes\n\t\t\t\t\t\t:\n\t\t\t\t\t\tplaceHolder = vote\n\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\tawait dispatch({\n\t\t\t\t\ttype: NEW_VOTE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tvotes: placeHolder,\n\t\t\t\t\t\tupdateBool:true\n\t\t\t\t\t}\n\t\t\t\t})\n\t};"]},"metadata":{},"sourceType":"module"}