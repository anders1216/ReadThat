{"ast":null,"code":"var _jsxFileName = \"/Users/andershornor/Class_Work/ReadThat1/client/src/components/Post.jsx\";\nimport React, { Component } from 'react';\nimport defaultImage from '../images/logo.png';\nimport { API } from '../containers/MainPage';\nimport { connect } from 'react-redux';\nimport NewComment from './forms/NewComment';\nimport Comment from './Comment';\nimport { newComment, fetchComments } from '../actions/commentActions';\nimport { voteCount } from '../actions/voteActions';\n\nclass Post extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      newComment: '',\n      comments: [],\n      postsVotes: [],\n      voteCount: 0,\n      displayComments: false,\n      commenting: false,\n      prevState: [],\n      hasUpVoted: false,\n      hasDownVoted: false,\n      renderModalBool: false\n    };\n\n    this.updatePostsVotes = async () => {\n      console.log(\"Update Votes\");\n      this.props.voteCount(); // \tlet postsVotesVar =  await this.props.votes.filter(vote => vote.post_id === this.props.post.id);\n      // \tlet upVotes = await postsVotesVar.filter(vote => vote.is_down_vote === false);\n      // \tlet downVotes =  await postsVotesVar.filter(vote => vote.is_down_vote === true);\n      // \tlet calculatedVoteCount =  await upVotes.length - downVotes.length;\n      // \tthis.setState({ postsVotes: postsVotesVar, voteCount: calculatedVoteCount });\n      // \tif ( upVotes.some(\n      // \t\tvote => vote['user_id'] === this.props.currentUser.user.id && vote['is_down_vote'] === false\n      // \t\t)\n      // \t){ \n      // \t\tawait this.setState({ hasUpVoted: true });\n      // \t} else if ( downVotes.some(\n      // \t\t\tvote => vote['user_id'] === this.props.currentUser.user.id && vote['is_down_vote'] === true\n      // \t\t)\n      // \t){ \n      // \t\tawait this.setState({ hasDownVoted: true });\n      // \t}\n      // \tawait this.props.resetFilterBool()\n    };\n\n    this.votesThings = () => {\n      console.log(\"votesThings\");\n      this.props.voteCount(); // const { votes, post, currentUser } = this.props;\n      // let postsVotesVar = votes.filter(vote => vote.post_id === post.id);\n      // let upVotes = postsVotesVar.filter(vote => vote.is_down_vote === false);\n      // let downVotes = postsVotesVar.filter(vote => vote.is_down_vote === true);\n      // let calculatedVoteCount = upVotes.length - downVotes.length;\n      // // this.props.postsFilter(post.id, calculatedVoteCount)\n      // this.setState({ postsVotes: postsVotesVar, voteCount: calculatedVoteCount });\n      // if ( upVotes.some(\n      // \t\tvote => vote['user_id'] === currentUser.user.id && vote['is_down_vote'] === false\n      // \t)\n      // ) {\n      //  this.setState({ hasUpVoted: true });\n      // } else if ( downVotes.some(\n      // \t\tvote => vote['user_id'] === currentUser.user.id && vote['is_down_vote'] === true\n      // \t)\n      // )\n      //  this.setState({ hasDownVoted: true });\n    };\n\n    this.commentOnPost = () => {\n      const commenting = this.state.commenting;\n      this.setState({\n        commenting: !commenting\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        newComment: e.target.value\n      });\n    };\n\n    this.handleSubmit = (e, key, value) => {\n      e.preventDefault();\n      this.state.newComment.length > 0 ? this.postComment(key, value) : window.alert('No Empty Comments');\n    };\n\n    this.postComment = (key, value) => {\n      const _this$state = this.state,\n            comments = _this$state.comments,\n            newComment = _this$state.newComment,\n            commenting = _this$state.commenting;\n      const currentUser = this.props.currentUser;\n      fetch(API + 'comments', {\n        method: 'POST',\n        headers: {\n          Authorization: \"Bearer \".concat(localStorage.getItem(currentUser.user.id)),\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        },\n        body: JSON.stringify({\n          comment: {\n            content: newComment,\n            user_id: currentUser.user.id,\n            [key]: value\n          }\n        })\n      }).then(res => res.json()).then(comment => {\n        comment.errors ? alert(comment.errors) : this.setState({\n          comments: [...comments, comment]\n        });\n      }).then(this.setState({\n        commenting: !commenting\n      }));\n    };\n\n    this.displayComments = async () => {\n      const post = this.props.post;\n      await fetch(API + 'comments/' + \"\".concat(post.id)).then(res => res.json()).then(comments => this.setState({\n        comments: comments\n      }));\n      this.setState({\n        displayComments: !this.state.displayComments\n      });\n\n      if (this.state.comments.length === 0) {\n        alert(\"Currently No Comments...Be the First to Write One!\");\n      }\n    };\n\n    this.rapidVoteIncrement = async e => {\n      const _this$props = this.props,\n            voteOnPost = _this$props.voteOnPost,\n            post = _this$props.post;\n      voteOnPost(post.id, e.target.name);\n\n      if (e.target.name === 'up' && !this.state.hasDownVoted && !this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount + 1,\n          hasUpVoted: true\n        });\n        console.log('up1');\n      } else if (e.target.name === 'up' && this.state.hasDownVoted && !this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount + 2,\n          hasDownVoted: false,\n          hasUpVoted: true\n        });\n        console.log('up2');\n      } else if (e.target.name === 'up' && !this.state.hasDownVoted && this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount - 1,\n          hasDownVoted: false,\n          hasUpVoted: false\n        });\n        console.log('up3');\n      } else if (e.target.name === 'down' && !this.state.hasDownVoted && !this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount - 1,\n          hasDownVoted: true\n        });\n        console.log('down1');\n      } else if (e.target.name === 'down' && !this.state.hasDownVoted && this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount - 2,\n          hasUpVoted: false,\n          hasDownVoted: true\n        });\n        console.log('down2');\n      } else if (e.target.name === 'down' && this.state.hasDownVoted && !this.state.hasUpVoted) {\n        await this.setState({\n          voteCount: this.state.voteCount + 1,\n          hasDownVoted: false,\n          hasUpVoted: false\n        });\n        console.log('down3');\n      }\n    };\n\n    this.renderModal = () => {\n      this.setState({\n        renderModalBool: !this.state.renderModalBool\n      });\n    };\n  }\n\n  async componentDidMount() {\n    await this.votesThings();\n  }\n\n  async componentDidUpdate() {\n    if (this.props.filterBool) {\n      await this.updatePostsVotes();\n    } else if (this.props.updateBool) {\n      await this.votesThings;\n    }\n  }\n\n  render() {\n    const _this$props$post = this.props.post,\n          img = _this$props$post.img,\n          title = _this$props$post.title,\n          content = _this$props$post.content,\n          link = _this$props$post.link,\n          uploadedFile = _this$props$post.uploadedFile,\n          id = _this$props$post.id;\n    const _this$props2 = this.props,\n          post = _this$props2.post,\n          currentUser = _this$props2.currentUser;\n    const _this$state2 = this.state,\n          commenting = _this$state2.commenting,\n          comments = _this$state2.comments,\n          voteCount = _this$state2.voteCount;\n    let image;\n\n    if (!img && !uploadedFile) {\n      image = defaultImage;\n    } else if (!img && uploadedFile) {\n      image = uploadedFile;\n    } else {\n      image = defaultImage;\n    }\n\n    return this.state.renderModalBool ? React.createElement(\"div\", {\n      className: \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-content-post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, title), React.createElement(\"div\", {\n      className: \"contents-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-post-img-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"modal-post-img\",\n      src: image,\n      alt: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"content-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, content, link)), React.createElement(\"div\", {\n      className: \"button-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Doots: \", voteCount), React.createElement(\"button\", {\n      name: \"up\",\n      onClick: e => this.rapidVoteIncrement(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"\\u25B2\"), React.createElement(\"button\", {\n      name: \"down\",\n      onClick: e => this.rapidVoteIncrement(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"\\u25BC\"), React.createElement(\"button\", {\n      onClick: e => this.commentOnPost(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Comment\"), commenting ? React.createElement(NewComment, {\n      variableKey: 'post_id',\n      value: id,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      commentOnPost: this.commentOnPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }) : null, React.createElement(\"button\", {\n      onClick: e => this.displayComments(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Display Comments\"), React.createElement(\"button\", {\n      onClick: e => this.renderModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Close Post\"), React.createElement(\"ul\", {\n      className: \"post-ul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, this.state.displayComments && comments.length > 0 ? comments.map(comment => {\n      return React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(Comment, {\n        comment: comment,\n        comments: comments,\n        commenting: commenting,\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        displayComments: this.displayComments,\n        commentOnPost: this.commentOnPost,\n        currentUser: currentUser,\n        post: post,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }));\n    }) : null)))) : React.createElement(\"div\", {\n      className: \"post-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"title-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, title), React.createElement(\"div\", {\n      className: \"contents-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"post-img-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"post-img\",\n      src: image,\n      alt: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"content-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, content, link)), React.createElement(\"div\", {\n      className: \"button-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Doots: \", voteCount), React.createElement(\"button\", {\n      name: \"up\",\n      onClick: e => this.rapidVoteIncrement(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"\\u25B2\"), React.createElement(\"button\", {\n      name: \"down\",\n      onClick: e => this.rapidVoteIncrement(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"\\u25BC\"), React.createElement(\"button\", {\n      onClick: e => this.commentOnPost(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Comment\"), commenting ? React.createElement(NewComment, {\n      variableKey: 'post_id',\n      value: id,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      commentOnPost: this.commentOnPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }) : null, React.createElement(\"button\", {\n      onClick: e => this.displayComments(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"Display Comments\"), React.createElement(\"button\", {\n      onClick: e => this.renderModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"Enlarge Post\"), React.createElement(\"ul\", {\n      className: \"post-ul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, this.state.displayComments && comments.length > 0 ? comments.map(comment => {\n      return React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(Comment, {\n        comment: comment,\n        comments: comments,\n        commenting: commenting,\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        displayComments: this.displayComments,\n        commentOnPost: this.commentOnPost,\n        currentUser: currentUser,\n        post: post,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }));\n    }) : null)));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.user.currentUser,\n  votes: state.votes.votes\n});\n\nexport default connect(mapStateToProps, {\n  voteCount\n})(Post); // =============================================================================================================\n// voteOnPost = () => {\n// \tconst { currentUser, post } = this.props\n// \tconst { votes } = this.state\n// \tconsole.log('vote')\n// \tfetch(API + 'votes', {\n// \t\tmethod: 'POST',\n// \t\theaders: {'Authorization': `Bearer ${localStorage.getItem(currentUser)}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n// \t\tbody: JSON.stringify({vote: {post: post, user: currentUser.id}})\n// \t}).then(res => res.json()).then(vote => { vote.errors ? alert(vote.errors) :\n// \t\tthis.setState({votes: [...votes, vote]})})\n// \t//\n// }\n// unvoteOnPost = (e) => {\n// \tconst { currentUser, post } = this.props\n// \tconsole.log('unvote')\n// \tfetch(API + 'votes/delete', {\n// \t\tmethod: 'POST',\n// \t\theaders: {'Authorization': `Bearer ${localStorage.getItem(currentUser)}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n// \t\tbody: JSON.stringify({vote: {post: post, user: currentUser.id}})\n// \t}).then(res => res.json()).then(votes => this.setState({votes: votes})).then(this.countDownVotes())\n// }\n// countDownVotes = () => {\n// \tconst { votes } = this.state\n// \tif (votes.length > 0){\n// \t\tvotes.forEach(vote => {\n// \t\t\tif (vote.is_down_vote){\n// \t\t\t\tthis.setState({downVoteCount: this.state.downVoteCount++})\n// \t\t\t}\n// \t\t})\n// \t}\n// }","map":{"version":3,"sources":["/Users/andershornor/Class_Work/ReadThat1/client/src/components/Post.jsx"],"names":["React","Component","defaultImage","API","connect","NewComment","Comment","newComment","fetchComments","voteCount","Post","state","comments","postsVotes","displayComments","commenting","prevState","hasUpVoted","hasDownVoted","renderModalBool","updatePostsVotes","console","log","props","votesThings","commentOnPost","setState","handleChange","e","target","value","handleSubmit","key","preventDefault","length","postComment","window","alert","currentUser","fetch","method","headers","Authorization","localStorage","getItem","user","id","Accept","body","JSON","stringify","comment","content","user_id","then","res","json","errors","post","rapidVoteIncrement","voteOnPost","name","renderModal","componentDidMount","componentDidUpdate","filterBool","updateBool","render","img","title","link","uploadedFile","image","map","mapStateToProps","votes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport defaultImage from '../images/logo.png';\nimport { API } from '../containers/MainPage';\nimport { connect } from 'react-redux'\nimport NewComment from './forms/NewComment';\nimport Comment from './Comment';\nimport { newComment, fetchComments } from '../actions/commentActions'\nimport { voteCount } from '../actions/voteActions'\n\nclass Post extends Component {\n\tstate = {\n\t\tnewComment: '',\n\t\tcomments: [],\n\t\tpostsVotes: [],\n\t\tvoteCount: 0,\n\t\tdisplayComments: false,\n\t\tcommenting: false,\n\t\tprevState: [],\n\t\thasUpVoted: false,\n\t\thasDownVoted: false,\n\t\trenderModalBool: false\n\t};\n\n\tasync componentDidMount() {\n\t\tawait this.votesThings()\n\t}\n\n\tasync componentDidUpdate() {\n\t\tif (this.props.filterBool){\n\t\t await this.updatePostsVotes()\n\t\t}\n\t\telse if(this.props.updateBool){\n\t\tawait this.votesThings\n\t\t}\n\t}\n\n\tupdatePostsVotes = async () => {\n\t\tconsole.log(\"Update Votes\")\n\t\tthis.props.voteCount()\n\t// \tlet postsVotesVar =  await this.props.votes.filter(vote => vote.post_id === this.props.post.id);\n\t// \tlet upVotes = await postsVotesVar.filter(vote => vote.is_down_vote === false);\n\t// \tlet downVotes =  await postsVotesVar.filter(vote => vote.is_down_vote === true);\n\t// \tlet calculatedVoteCount =  await upVotes.length - downVotes.length;\n\t// \tthis.setState({ postsVotes: postsVotesVar, voteCount: calculatedVoteCount });\n\t// \tif ( upVotes.some(\n\t// \t\tvote => vote['user_id'] === this.props.currentUser.user.id && vote['is_down_vote'] === false\n\t// \t\t)\n\t// \t){ \n\t// \t\tawait this.setState({ hasUpVoted: true });\n\t// \t} else if ( downVotes.some(\n\t// \t\t\tvote => vote['user_id'] === this.props.currentUser.user.id && vote['is_down_vote'] === true\n\t// \t\t)\n\t// \t){ \n\t// \t\tawait this.setState({ hasDownVoted: true });\n\t// \t}\n\t// \tawait this.props.resetFilterBool()\n\t}\n\n\tvotesThings = () => {\n\t\tconsole.log(\"votesThings\")\n\t\tthis.props.voteCount()\n\t\t// const { votes, post, currentUser } = this.props;\n\t\t// let postsVotesVar = votes.filter(vote => vote.post_id === post.id);\n\t\t// let upVotes = postsVotesVar.filter(vote => vote.is_down_vote === false);\n\t\t// let downVotes = postsVotesVar.filter(vote => vote.is_down_vote === true);\n\t\t// let calculatedVoteCount = upVotes.length - downVotes.length;\n\t \t// // this.props.postsFilter(post.id, calculatedVoteCount)\n\t\t// this.setState({ postsVotes: postsVotesVar, voteCount: calculatedVoteCount });\n\t\t// if ( upVotes.some(\n\t\t// \t\tvote => vote['user_id'] === currentUser.user.id && vote['is_down_vote'] === false\n\t\t// \t)\n\t\t// ) {\n\t\t//  this.setState({ hasUpVoted: true });\n\t\t// } else if ( downVotes.some(\n\t\t// \t\tvote => vote['user_id'] === currentUser.user.id && vote['is_down_vote'] === true\n\t\t// \t)\n\t\t// )\n\t\t//  this.setState({ hasDownVoted: true });\n\t}\n\n\tcommentOnPost = () => {\n\t\tconst { commenting } = this.state;\n\t\tthis.setState({ commenting: !commenting });\n\t};\n\n\thandleChange = e => {\n\t\tthis.setState({ newComment: e.target.value });\n\t};\n\n\thandleSubmit = (e, key, value) => {\n\t\te.preventDefault();\n\t\tthis.state.newComment.length > 0\n\t\t\t? this.postComment(key, value)\n\t\t\t: window.alert('No Empty Comments');\n\t};\n\n\tpostComment = (key, value) => {\n\t\tconst { comments, newComment, commenting } = this.state;\n\t\tconst { currentUser } = this.props;\n\t\tfetch(API + 'comments', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem(currentUser.user.id)}`,\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tAccept: 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tcomment: { content: newComment, user_id: currentUser.user.id, [key]: value }\n\t\t\t})\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(comment => {\n\t\t\t\tcomment.errors\n\t\t\t\t\t? alert(comment.errors)\n\t\t\t\t\t: this.setState({ comments: [...comments, comment] });\n\t\t\t})\n\t\t\t.then(this.setState({ commenting: !commenting }));\n\t};\n\n\tdisplayComments = async () => {\n\t\tconst { post } = this.props;\n\t\tawait fetch(API + 'comments/' + `${post.id}`)\n\t\t\t.then(res => res.json())\n\t\t\t.then(comments => this.setState({ comments: comments }));\n\t\tthis.setState({ displayComments: !this.state.displayComments });\n\t\tif (this.state.comments.length === 0){\n\t\t\talert(\"Currently No Comments...Be the First to Write One!\")\n\t\t} \n\t};\n\n\trapidVoteIncrement = async (e) => {\n\t\tconst { voteOnPost, post } = this.props;\n\t\tvoteOnPost(post.id, e.target.name)\n\t\tif (e.target.name === 'up' && !this.state.hasDownVoted && !this.state.hasUpVoted ) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount + 1, hasUpVoted: true });\n\t\t\tconsole.log('up1')\n\t\t} else if (e.target.name === 'up' && this.state.hasDownVoted && !this.state.hasUpVoted) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount + 2, hasDownVoted: false, hasUpVoted: true });\n\t\t\tconsole.log('up2')\n\t\t} else if (e.target.name === 'up' && !this.state.hasDownVoted && this.state.hasUpVoted) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount - 1, hasDownVoted: false, hasUpVoted: false });\n\t\t\tconsole.log('up3')\n\t\t} else if (e.target.name === 'down' && !this.state.hasDownVoted && !this.state.hasUpVoted) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount - 1, hasDownVoted: true });\n\t\t\tconsole.log('down1')\n\t\t} else if (e.target.name === 'down'&& !this.state.hasDownVoted  && this.state.hasUpVoted ) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount - 2, hasUpVoted: false, hasDownVoted: true });\n\t\t\tconsole.log('down2')\n\t\t} else if (e.target.name === 'down' && this.state.hasDownVoted && !this.state.hasUpVoted) {\n\t\t\tawait this.setState({ voteCount: this.state.voteCount + 1, hasDownVoted: false, hasUpVoted: false });\n\t\t\tconsole.log('down3')\n\t\t}\n\t};\n\n\trenderModal = () => {\n\t\tthis.setState({renderModalBool: !this.state.renderModalBool})\n\t}\n\n\trender() {\n\t\tconst { img, title, content, link, uploadedFile, id } = this.props.post;\n\t\tconst { post, currentUser } = this.props\n\t\tconst { commenting, comments, voteCount } = this.state;\n\t\tlet image;\n\t\tif (!img && !uploadedFile) {\n\t\t\timage = defaultImage;\n\t\t} else if(!img && uploadedFile) {\n\t\t\timage = uploadedFile;\n\t\t} else {\n\t\t\timage = defaultImage\n\t\t}\n\t\treturn (\n\t\t\tthis.state.renderModalBool ? \n\t\t\t<div className=\"modal\">\n\t\t\t\t<div className='modal-content-post'>\n\t\t\t\t<div className='title-container'>{title}</div>\n\t\t\t\t<div className='contents-container'>\n\t\t\t\t<div className='modal-post-img-container'>\n\t\t\t\t\t<img className='modal-post-img' src={image} alt={title} />\n\t\t\t\t</div>\n\t\t\t\t<div className='content-container'>\n\t\t\t\t\t{content}\n\t\t\t\t\t{link}\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='button-container'>\n\t\t\t\t\t<span>Doots: {voteCount}</span>\n\t\t\t\t\t<button name='up' onClick={e => this.rapidVoteIncrement(e)}>\n\t\t\t\t\t\t▲\n\t\t\t\t\t</button>\n\t\t\t\t\t<button name='down' onClick={e => this.rapidVoteIncrement(e)}>\n\t\t\t\t\t\t▼\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={e => this.commentOnPost(e)}>Comment</button>\n\t\t\t\t\t{commenting ? (\n\t\t\t\t\t\t<NewComment\n\t\t\t\t\t\t\tvariableKey={'post_id'}\n\t\t\t\t\t\t\tvalue={id}\n\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t\t\tcommentOnPost={this.commentOnPost}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<button onClick={e => this.displayComments(e)}>Display Comments</button>\n\t\t\t\t\t<button onClick={e => this.renderModal()}>Close Post</button>\n\t\t\t\t\t<ul className='post-ul'>\n\t\t\t\t\t\t{this.state.displayComments && comments.length > 0\n\t\t\t\t\t\t\t? comments.map(comment => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<Comment\n\t\t\t\t\t\t\t\t\t\t\t\tcomment={comment}\n\t\t\t\t\t\t\t\t\t\t\t\tcomments={comments}\n\t\t\t\t\t\t\t\t\t\t\t\tcommenting={commenting}\n\t\t\t\t\t\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayComments={this.displayComments}\n\t\t\t\t\t\t\t\t\t\t\t\tcommentOnPost={this.commentOnPost}\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t\t\t\t\t\t\t\tpost={post}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t:\t\n\t\t<div className='post-card'>\n\t\t\t\t<div className='title-container'>{title}</div>\n\t\t\t\t<div className='contents-container'>\n\t\t\t\t<div className='post-img-container'>\n\t\t\t\t\t<img className='post-img' src={image} alt={title} />\n\t\t\t\t</div>\n\t\t\t\t<div className='content-container'>\n\t\t\t\t\t{content}\n\t\t\t\t\t{link}\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='button-container'>\n\t\t\t\t\t<span>Doots: {voteCount}</span>\n\t\t\t\t\t<button name='up' onClick={e => this.rapidVoteIncrement(e)}>\n\t\t\t\t\t\t▲\n\t\t\t\t\t</button>\n\t\t\t\t\t<button name='down' onClick={e => this.rapidVoteIncrement(e)}>\n\t\t\t\t\t\t▼\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={e => this.commentOnPost(e)}>Comment</button>\n\t\t\t\t\t{commenting ? (\n\t\t\t\t\t\t<NewComment\n\t\t\t\t\t\t\tvariableKey={'post_id'}\n\t\t\t\t\t\t\tvalue={id}\n\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t\t\tcommentOnPost={this.commentOnPost}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<button onClick={e => this.displayComments(e)}>Display Comments</button>\n\t\t\t\t\t<button onClick={e => this.renderModal()}>Enlarge Post</button>\n\t\t\t\t\t<ul className='post-ul'>\n\t\t\t\t\t\t{this.state.displayComments && comments.length > 0\n\t\t\t\t\t\t\t? comments.map(comment => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<Comment\n\t\t\t\t\t\t\t\t\t\t\t\tcomment={comment}\n\t\t\t\t\t\t\t\t\t\t\t\tcomments={comments}\n\t\t\t\t\t\t\t\t\t\t\t\tcommenting={commenting}\n\t\t\t\t\t\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayComments={this.displayComments}\n\t\t\t\t\t\t\t\t\t\t\t\tcommentOnPost={this.commentOnPost}\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t\t\t\t\t\t\t\tpost={post}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tcurrentUser: state.user.currentUser,\n\tvotes: state.votes.votes\n})\n\nexport default connect(mapStateToProps, { voteCount })(Post);\n\n// =============================================================================================================\n// voteOnPost = () => {\n// \tconst { currentUser, post } = this.props\n// \tconst { votes } = this.state\n// \tconsole.log('vote')\n// \tfetch(API + 'votes', {\n// \t\tmethod: 'POST',\n// \t\theaders: {'Authorization': `Bearer ${localStorage.getItem(currentUser)}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n// \t\tbody: JSON.stringify({vote: {post: post, user: currentUser.id}})\n// \t}).then(res => res.json()).then(vote => { vote.errors ? alert(vote.errors) :\n// \t\tthis.setState({votes: [...votes, vote]})})\n// \t//\n// }\n\n// unvoteOnPost = (e) => {\n// \tconst { currentUser, post } = this.props\n// \tconsole.log('unvote')\n\n// \tfetch(API + 'votes/delete', {\n// \t\tmethod: 'POST',\n// \t\theaders: {'Authorization': `Bearer ${localStorage.getItem(currentUser)}`, 'Content-Type': 'application/json', Accept: 'application/json'},\n// \t\tbody: JSON.stringify({vote: {post: post, user: currentUser.id}})\n// \t}).then(res => res.json()).then(votes => this.setState({votes: votes})).then(this.countDownVotes())\n// }\n\n// countDownVotes = () => {\n// \tconst { votes } = this.state\n// \tif (votes.length > 0){\n// \t\tvotes.forEach(vote => {\n// \t\t\tif (vote.is_down_vote){\n// \t\t\t\tthis.setState({downVoteCount: this.state.downVoteCount++})\n// \t\t\t}\n// \t\t})\n// \t}\n// }\n"]},"metadata":{},"sourceType":"module"}